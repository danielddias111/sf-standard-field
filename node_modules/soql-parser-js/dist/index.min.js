/*! soql-parser-js - v4.0.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("soqlParserJs",[],t):"object"==typeof exports?exports.soqlParserJs=t():e.soqlParserJs=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function i(e){return e&&0===e.length}function o(e){return null==e?[]:Object.keys(e)}function a(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}function s(e,t){for(var n=[],r=o(e),i=0;i<r.length;i++){var a=r[i];n.push(t.call(null,e[a],a))}return n}function u(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t.call(null,e[r],r));return n}function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?t=t.concat(c(r)):t.push(r)}return t}function l(e){return i(e)?void 0:e[0]}function f(e){var t=e&&e.length;return t?e[t-1]:void 0}function p(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n);else{if(!F(e))throw Error("non exhaustive match");var r=o(e);for(n=0;n<r.length;n++){var i=r[n],a=e[i];t.call(null,a,i)}}}function d(e){return"string"==typeof e}function h(e){return void 0===e}function E(e){return e instanceof Function}function T(e,t){return void 0===t&&(t=1),e.slice(t,e.length)}function m(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)}function y(e,t){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function g(e,t){return y(e,(function(e){return!t(e)}))}function A(e,t){for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];t(a)&&(r[o]=a)}return r}function v(e,t){return!!F(e)&&e.hasOwnProperty(t)}function N(e,t){return void 0!==I(e,(function(e){return e===t}))}function L(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function O(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function I(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t.call(null,r))return r}}function _(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function R(e,t,n){for(var r=Array.isArray(e),i=r?e:a(e),s=r?[]:o(e),u=n,c=0;c<i.length;c++)u=t.call(null,u,i[c],r?c:s[c]);return u}function S(e){return g(e,(function(e){return null==e}))}function C(e,t){void 0===t&&(t=function(e){return e});var n=[];return R(e,(function(e,r){var i=t(r);return N(n,i)?e:(n.push(i),e.concat(r))}),[])}function P(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[null],i=r.concat(t);return Function.bind.apply(e,i)}function k(e){return Array.isArray(e)}function x(e){return e instanceof RegExp}function F(e){return e instanceof Object}function M(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}function b(e,t){return g(e,(function(e){return N(t,e)}))}function U(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function D(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function w(e,t){var n=L(e);return n.sort((function(e,n){return t(e)-t(n)})),n}function B(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function G(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=o(i),s=0;s<a.length;s++){var u=a[s];e[u]=i[u]}return e}function W(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=o(i),s=0;s<a.length;s++){var u=a[s];v(e,u)||(e[u]=i[u])}return e}function j(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W.apply(void 0,r([{}],e))}function Y(e,t){var n={};return p(e,(function(e){var r=t(e),i=n[r];i?i.push(e):n[r]=[e]})),n}function K(e,t){for(var n=O(e),r=o(t),i=0;i<r.length;i++){var a=r[i],s=t[a];n[a]=s}return n}function V(){}function H(e){return e}function X(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(void 0!==r?r:void 0)}return t}function Q(e){console&&console.error&&console.error("Error: "+e)}function z(e){console&&console.warn&&console.warn("Warning: "+e)}function q(){return"function"==typeof Map}function $(e){return e[e.length-1]}function Z(e){var t=(new Date).getTime(),n=e();return{time:(new Date).getTime()-t,value:n}}function J(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.bar}return r(),r(),e}Object.defineProperty(t,"__esModule",{value:!0}),t.toFastProperties=t.timer=t.peek=t.isES2015MapSupported=t.PRINT_WARNING=t.PRINT_ERROR=t.packArray=t.IDENTITY=t.NOOP=t.merge=t.groupBy=t.defaults=t.assignNoOverwrite=t.assign=t.zipObject=t.sortBy=t.indexOf=t.some=t.difference=t.every=t.isObject=t.isRegExp=t.isArray=t.partial=t.uniq=t.compact=t.reduce=t.findAll=t.find=t.cloneObj=t.cloneArr=t.contains=t.has=t.pick=t.reject=t.filter=t.dropRight=t.drop=t.isFunction=t.isUndefined=t.isString=t.forEach=t.last=t.first=t.flatten=t.map=t.mapValues=t.values=t.keys=t.isEmpty=void 0,t.isEmpty=i,t.keys=o,t.values=a,t.mapValues=s,t.map=u,t.flatten=c,t.first=l,t.last=f,t.forEach=p,t.isString=d,t.isUndefined=h,t.isFunction=E,t.drop=T,t.dropRight=m,t.filter=y,t.reject=g,t.pick=A,t.has=v,t.contains=N,t.cloneArr=L,t.cloneObj=O,t.find=I,t.findAll=_,t.reduce=R,t.compact=S,t.uniq=C,t.partial=P,t.isArray=k,t.isRegExp=x,t.isObject=F,t.every=M,t.difference=b,t.some=U,t.indexOf=D,t.sortBy=w,t.zipObject=B,t.assign=G,t.assignNoOverwrite=W,t.defaults=j,t.groupBy=Y,t.merge=K,t.NOOP=V,t.IDENTITY=H,t.packArray=X,t.PRINT_ERROR=Q,t.PRINT_WARNING=z,t.isES2015MapSupported=q,t.peek=$,t.timer=Z,t.toFastProperties=J},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.serializeProduction=t.serializeGrammar=t.Terminal=t.Alternation=t.RepetitionWithSeparator=t.Repetition=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Option=t.Alternative=t.Rule=t.NonTerminal=t.AbstractProduction=void 0;var o=n(0),a=n(3),s=function(){function e(e){this._definition=e}return Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),e.prototype.accept=function(e){e.visit(this),o.forEach(this.definition,(function(t){t.accept(e)}))},e}();t.AbstractProduction=s;var u=function(e){function t(t){var n=e.call(this,[])||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.accept=function(e){e.visit(this)},t}(s);t.NonTerminal=u;var c=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.orgText="",o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.Rule=c;var l=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.ignoreAmbiguities=!1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.Alternative=l;var f=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.Option=f;var p=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.RepetitionMandatory=p;var d=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.RepetitionMandatoryWithSeparator=d;var h=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.Repetition=h;var E=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),t}(s);t.RepetitionWithSeparator=E;var T=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,o.assign(n,o.pick(t,(function(e){return void 0!==e}))),n}return i(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),t}(s);t.Alternation=T;var m=function(){function e(e){this.idx=1,o.assign(this,o.pick(e,(function(e){return void 0!==e})))}return e.prototype.accept=function(e){e.visit(this)},e}();function y(e){function t(e){return o.map(e,y)}if(e instanceof u)return{type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};if(e instanceof l)return{type:"Alternative",definition:t(e.definition)};if(e instanceof f)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof p)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof d)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:y(new m({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof E)return{type:"RepetitionWithSeparator",idx:e.idx,separator:y(new m({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof h)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof T)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof m){var n={type:"Terminal",name:e.terminalType.name,label:a.tokenLabel(e.terminalType),idx:e.idx},r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(n.pattern=o.isRegExp(r)?r.source:r),n}if(e instanceof c)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}t.Terminal=m,t.serializeGrammar=function(e){return o.map(e,y)},t.serializeProduction=y},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var o=n(0),a=n(29),s=n(3),u=n(10),c=n(31),l=n(25),f=n(33),p=n(34),d=n(37),h=n(38),E=n(39),T=n(40),m=n(41),y=n(42),g=n(43),A=n(44);t.END_OF_FILE=s.createTokenInstance(s.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:u.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!0}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={})),t.EMPTY_ALT=function(e){return void 0===e&&(e=void 0),function(){return e}};var v=function(){function e(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;if(this.initErrorHandler(n),this.initLexerAdapter(),this.initLooksAhead(n),this.initRecognizerEngine(e,n),this.initRecoverable(n),this.initTreeBuilder(n),this.initContentAssist(),this.initGastRecorder(n),this.initPerformanceTracer(n),o.has(n,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=o.has(n,"skipValidations")?n.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return e.performSelfAnalysis=function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},e.prototype.performSelfAnalysis=function(){var t=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;t.selfAnalysisDone=!0;var r=t.className;t.TRACE_INIT("toFastProps",(function(){o.toFastProperties(t)})),t.TRACE_INIT("Grammar Recording",(function(){try{t.enableRecording(),o.forEach(t.definedRulesNames,(function(e){var n=t[e].originalGrammarAction,r=void 0;t.TRACE_INIT(e+" Rule",(function(){r=t.topLevelRuleRecord(e,n)})),t.gastProductionsCache[e]=r}))}finally{t.disableRecording()}}));var i=[];if(t.TRACE_INIT("Grammar Resolving",(function(){i=c.resolveGrammar({rules:o.values(t.gastProductionsCache)}),t.definitionErrors=t.definitionErrors.concat(i)})),t.TRACE_INIT("Grammar Validations",(function(){if(o.isEmpty(i)&&!1===t.skipValidations){var e=c.validateGrammar({rules:o.values(t.gastProductionsCache),maxLookahead:t.maxLookahead,tokenTypes:o.values(t.tokensMap),errMsgProvider:u.defaultGrammarValidatorErrorProvider,grammarName:r});t.definitionErrors=t.definitionErrors.concat(e)}})),o.isEmpty(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",(function(){var e=a.computeAllProdsFollows(o.values(t.gastProductionsCache));t.resyncFollows=e})),t.TRACE_INIT("ComputeLookaheadFunctions",(function(){t.preComputeLookaheadFunctions(o.values(t.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!o.isEmpty(t.definitionErrors))throw n=o.map(t.definitionErrors,(function(e){return e.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},e.DEFER_DEFINITION_ERRORS_HANDLING=!1,e}();t.Parser=v,A.applyMixins(v,[l.Recoverable,f.LooksAhead,p.TreeBuilder,d.LexerAdapter,E.RecognizerEngine,h.RecognizerApi,T.ErrorHandler,m.ContentAssist,y.GastRecorder,g.PerformanceTracer]);var N=function(e){function n(n,r){void 0===r&&(r=t.DEFAULT_PARSER_CONFIG);var i=o.cloneObj(r);return i.outputCst=!0,e.call(this,n,i)||this}return i(n,e),n}(v);t.CstParser=N;var L=function(e){function n(n,r){void 0===r&&(r=t.DEFAULT_PARSER_CONFIG);var i=o.cloneObj(r);return i.outputCst=!1,e.call(this,n,i)||this}return i(n,e),n}(v);t.EmbeddedActionsParser=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenMatcher=t.createTokenInstance=t.EOF=t.createToken=t.hasTokenLabel=t.tokenName=t.tokenLabel=void 0;var r=n(0),i=n(8),o=n(4);function a(e){return r.isString(e.LABEL)&&""!==e.LABEL}t.tokenLabel=function(e){return a(e)?e.LABEL:e.name},t.tokenName=function(e){return e.name},t.hasTokenLabel=a;function s(e){return function(e){var t=e.pattern,n={};n.name=e.name,r.isUndefined(t)||(n.PATTERN=t);if(r.has(e,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";r.has(e,"categories")&&(n.CATEGORIES=e.categories);o.augmentTokenTypes([n]),r.has(e,"label")&&(n.LABEL=e.label);r.has(e,"group")&&(n.GROUP=e.group);r.has(e,"pop_mode")&&(n.POP_MODE=e.pop_mode);r.has(e,"push_mode")&&(n.PUSH_MODE=e.push_mode);r.has(e,"longer_alt")&&(n.LONGER_ALT=e.longer_alt);r.has(e,"line_breaks")&&(n.LINE_BREAKS=e.line_breaks);r.has(e,"start_chars_hint")&&(n.START_CHARS_HINT=e.start_chars_hint);return n}(e)}t.createToken=s,t.EOF=s({name:"EOF",pattern:i.Lexer.NA}),o.augmentTokenTypes([t.EOF]),t.createTokenInstance=function(e,t,n,r,i,o,a,s){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}},t.tokenMatcher=function(e,t){return o.tokenStructuredMatcher(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.hasExtendingTokensTypesMapProperty=t.hasExtendingTokensTypesProperty=t.hasCategoriesProperty=t.hasShortKeyProperty=t.singleAssignCategoriesToksMap=t.assignCategoriesMapProp=t.assignCategoriesTokensProp=t.assignTokenDefaultProps=t.expandCategories=t.augmentTokenTypes=t.tokenIdxToClass=t.tokenShortNameIdx=t.tokenStructuredMatcherNoCategories=t.tokenStructuredMatcher=void 0;var r=n(0);function i(e){for(var t=r.cloneArr(e),n=e,i=!0;i;){n=r.compact(r.flatten(r.map(n,(function(e){return e.CATEGORIES}))));var o=r.difference(n,t);t=t.concat(o),r.isEmpty(o)?i=!1:n=o}return t}function o(e){r.forEach(e,(function(e){c(e)||(t.tokenIdxToClass[t.tokenShortNameIdx]=e,e.tokenTypeIdx=t.tokenShortNameIdx++),l(e)&&!r.isArray(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),l(e)||(e.CATEGORIES=[]),f(e)||(e.categoryMatches=[]),p(e)||(e.categoryMatchesMap={})}))}function a(e){r.forEach(e,(function(e){e.categoryMatches=[],r.forEach(e.categoryMatchesMap,(function(n,r){e.categoryMatches.push(t.tokenIdxToClass[r].tokenTypeIdx)}))}))}function s(e){r.forEach(e,(function(e){u([],e)}))}function u(e,t){r.forEach(e,(function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0})),r.forEach(t.CATEGORIES,(function(n){var i=e.concat(t);r.contains(i,n)||u(i,n)}))}function c(e){return r.has(e,"tokenTypeIdx")}function l(e){return r.has(e,"CATEGORIES")}function f(e){return r.has(e,"categoryMatches")}function p(e){return r.has(e,"categoryMatchesMap")}t.tokenStructuredMatcher=function(e,t){var n=e.tokenTypeIdx;return n===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[n]},t.tokenStructuredMatcherNoCategories=function(e,t){return e.tokenTypeIdx===t.tokenTypeIdx},t.tokenShortNameIdx=1,t.tokenIdxToClass={},t.augmentTokenTypes=function(e){var t=i(e);o(t),s(t),a(t),r.forEach(t,(function(e){e.isParent=e.categoryMatches.length>0}))},t.expandCategories=i,t.assignTokenDefaultProps=o,t.assignCategoriesTokensProp=a,t.assignCategoriesMapProp=s,t.singleAssignCategoriesToksMap=u,t.hasShortKeyProperty=c,t.hasCategoriesProperty=l,t.hasExtendingTokensTypesProperty=f,t.hasExtendingTokensTypesMapProperty=p,t.isTokenType=function(e){return r.has(e,"tokenTypeIdx")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAstVisitor=void 0;var r=n(1),i=function(){function e(){}return e.prototype.visit=function(e){var t=e;switch(t.constructor){case r.NonTerminal:return this.visitNonTerminal(t);case r.Alternative:return this.visitAlternative(t);case r.Option:return this.visitOption(t);case r.RepetitionMandatory:return this.visitRepetitionMandatory(t);case r.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(t);case r.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(t);case r.Repetition:return this.visitRepetition(t);case r.Alternation:return this.visitAlternation(t);case r.Terminal:return this.visitTerminal(t);case r.Rule:return this.visitRule(t);default:throw Error("non exhaustive match")}},e.prototype.visitNonTerminal=function(e){},e.prototype.visitAlternative=function(e){},e.prototype.visitOption=function(e){},e.prototype.visitRepetition=function(e){},e.prototype.visitRepetitionMandatory=function(e){},e.prototype.visitRepetitionMandatoryWithSeparator=function(e){},e.prototype.visitRepetitionWithSeparator=function(e){},e.prototype.visitAlternation=function(e){},e.prototype.visitTerminal=function(e){},e.prototype.visitRule=function(e){},e}();t.GAstVisitor=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.EarlyExitException=t.NotAllInputParsedException=t.NoViableAltException=t.MismatchedTokenException=t.isRecognitionException=void 0;var o=n(0),a=["MismatchedTokenException","NoViableAltException","EarlyExitException","NotAllInputParsedException"];Object.freeze(a),t.isRecognitionException=function(e){return o.contains(a,e.name)};var s=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t)||this;return i.token=n,i.resyncedTokens=[],Object.setPrototypeOf(i,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return i(t,e),t}(Error),u=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="MismatchedTokenException",i}return i(t,e),t}(s);t.MismatchedTokenException=u;var c=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="NoViableAltException",i}return i(t,e),t}(s);t.NoViableAltException=c;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="NotAllInputParsedException",r}return i(t,e),t}(s);t.NotAllInputParsedException=l;var f=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="EarlyExitException",i}return i(t,e),t}(s);t.EarlyExitException=f},function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return!!e&&e.every((function(e){return r(e)}))}function o(e){return Number.isFinite(e)}function a(e){return"boolean"==typeof e}function s(e){return null==e}Object.defineProperty(t,"__esModule",{value:!0}),t.getWhereValue=t.isGroupByFn=t.isGroupByField=t.isOrderByFn=t.isOrderByField=t.isValueQueryCondition=t.isNegationCondition=t.isValueFunctionCondition=t.isValueWithDateNLiteralCondition=t.isValueWithDateLiteralCondition=t.isValueCondition=t.isWhereOrHavingClauseWithRightCondition=t.isHavingClauseWithRightCondition=t.isWhereClauseWithRightCondition=t.isFieldSubquery=t.isSubquery=t.isComposeFieldTypeof=t.isComposeFieldSubquery=t.isComposeFieldRelationship=t.isComposeFieldFunction=t.isComposeField=t.hasAlias=t.getParams=t.generateParens=t.pad=t.getAsArrayStr=t.getLastItem=t.getIfTrue=t.get=t.isNil=t.isObject=t.isBoolean=t.isNumber=t.isStringArray=t.isString=t.isSubqueryFromFlag=t.isToken=void 0,t.isToken=function(e){return(e=Array.isArray(e)?e[0]:e).image&&!0},t.isSubqueryFromFlag=function(e,t){return t},t.isString=r,t.isStringArray=i,t.isNumber=o,t.isBoolean=a,t.isObject=function(e){return e instanceof Object},t.isNil=s,t.get=function(e,t,n){return s(e)?"":""+(n||"")+e+(t||"")},t.getIfTrue=function(e,t){return a(e)&&e?t:""},t.getLastItem=function(e){return e[e.length-1]},t.getAsArrayStr=function(e,t){return void 0===t&&(t=!1),Array.isArray(e)?e.length>0?"("+e.join(", ")+")":t?"()":"":t?"("+(e||"")+")":e||""},t.pad=function(e,t,n){void 0===n&&(n=0);var r=n>0?new Array(n).fill(" ").join(""):"";return e.length>t?""+r+e:""+r+e+new Array(t-e.length).fill(" ").join("")},t.generateParens=function(e,t,n){return void 0===n&&(n=""),o(e)&&e>0?new Array(e).fill(t).join(n):""},t.getParams=function e(t){return t.parameters&&0!==t.parameters.length?i(t.parameters)?t.parameters:r(t.parameters[0])?[t.parameters[0]]:e(t.parameters[0]):[]},t.hasAlias=function(e){return e&&!s(e.alias)},t.isComposeField=function(e){return r(e.field)&&!Array.isArray(e.relationships)&&!Array.isArray(e.conditions)},t.isComposeFieldFunction=function(e){return!s(e.functionName||e.fn)},t.isComposeFieldRelationship=function(e){return r(e.field)&&Array.isArray(e.relationships)},t.isComposeFieldSubquery=function(e){return!s(e.subquery)},t.isComposeFieldTypeof=function(e){return r(e.field)&&Array.isArray(e.conditions)},t.isSubquery=function(e){return r(e.relationshipName)},t.isFieldSubquery=function(e){return e&&e.type&&"FieldSubquery"===e.type},t.isWhereClauseWithRightCondition=function(e){return e&&e.operator&&e.right},t.isHavingClauseWithRightCondition=function(e){return e&&e.operator&&e.right},t.isWhereOrHavingClauseWithRightCondition=function(e){return e&&e.operator&&e.right},t.isValueCondition=function(e){return e&&r(e.field)&&r(e.operator)&&!s(e.value)},t.isValueWithDateLiteralCondition=function(e){return e&&r(e.field)&&r(e.operator)&&!s(e.value)&&("DATE_LITERAL"===e.literalType||Array.isArray(e.literalType)&&"DATE_LITERAL"===e.literalType[0])},t.isValueWithDateNLiteralCondition=function(e){return e&&r(e.field)&&r(e.operator)&&!s(e.value)&&!s(e.dateLiteralVariable)},t.isValueFunctionCondition=function(e){return e&&!s(e.fn)&&r(e.operator)&&!s(e.value)},t.isNegationCondition=function(e){return e&&o(e.openParen)&&s(e.operator)&&s(e.field)&&s(e.fn)&&s(e.closeParen)},t.isValueQueryCondition=function(e){return e&&r(e.field)&&r(e.operator)&&!s(e.valueQuery)&&s(e.value)},t.isOrderByField=function(e){return e&&!s(e.field)},t.isOrderByFn=function(e){return e&&!s(e.fn)},t.isGroupByField=function(e){return e&&!s(e.field)},t.isGroupByFn=function(e){return e&&!s(e.fn)},t.getWhereValue=function(e,t){if(s(t))return e;if(Array.isArray(t)&&Array.isArray(e))return e.map((function(e,n){return function(e,t){switch(t){case"STRING":return e.startsWith("'")?e:"'"+e+"'";default:return e}}(e,t[n])}));switch(Array.isArray(t)&&(t=t[0]),t){case"STRING":return Array.isArray(e)?e.map((function(e){return e.startsWith("'")?e:"'"+e+"'"})):e.startsWith("'")?e:"'"+e+"'";case"APEX_BIND_VARIABLE":return":"+e;default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=t.LexerDefinitionErrorType=void 0;var r=n(20),i=n(0),o=n(4),a=n(21),s=n(15);!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}(t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}));var u={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:a.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!0};Object.freeze(u);var c=function(){function e(e,t){var n=this;if(void 0===t&&(t=u),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=i.merge(u,t);var a=this.config.traceInitPerf;!0===a?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof a&&(this.traceInitMaxIdent=a,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var a,c=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===u.lineTerminatorsPattern)n.config.lineTerminatorsPattern=r.LineTerminatorOptimizedTester;else if(n.config.lineTerminatorCharacters===u.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),i.isArray(e)?((a={modes:{}}).modes[r.DEFAULT_MODE]=i.cloneArr(e),a[r.DEFAULT_MODE]=r.DEFAULT_MODE):(c=!1,a=i.cloneObj(e))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(r.performRuntimeChecks(a,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(r.performWarningRuntimeChecks(a,n.trackStartLines,n.config.lineTerminatorCharacters))}))),a.modes=a.modes?a.modes:{},i.forEach(a.modes,(function(e,t){a.modes[t]=i.reject(e,(function(e){return i.isUndefined(e)}))}));var l=i.keys(a.modes);if(i.forEach(a.modes,(function(e,a){n.TRACE_INIT("Mode: <"+a+"> processing",(function(){var s;(n.modes.push(a),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(r.validatePatterns(e,l))})),i.isEmpty(n.lexerDefinitionErrors))&&(o.augmentTokenTypes(e),n.TRACE_INIT("analyzeTokenTypes",(function(){s=r.analyzeTokenTypes(e,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[a]=s.patternIdxToConfig,n.charCodeToPatternIdxToConfig[a]=s.charCodeToPatternIdxToConfig,n.emptyGroups=i.merge(n.emptyGroups,s.emptyGroups),n.hasCustom=s.hasCustom||n.hasCustom,n.canModeBeOptimized[a]=s.canBeOptimized)}))})),n.defaultMode=a.defaultMode,!i.isEmpty(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var f=i.map(n.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+f)}i.forEach(n.lexerDefinitionWarning,(function(e){i.PRINT_WARNING(e.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(r.SUPPORT_STICKY?(n.chopInput=i.IDENTITY,n.match=n.matchWithTest):(n.updateLastIndex=i.NOOP,n.match=n.matchWithExec),c&&(n.handleModes=i.NOOP),!1===n.trackStartLines&&(n.computeNewColumn=i.IDENTITY),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=i.NOOP),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var e=i.reduce(n.canModeBeOptimized,(function(e,t,n){return!1===t&&e.push(n),e}),[]);if(t.ensureOptimizations&&!i.isEmpty(e))throw Error("Lexer Modes: < "+e.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){s.clearRegExpParserCache()})),n.TRACE_INIT("toFastProperties",(function(){i.toFastProperties(n)}))}))}return e.prototype.tokenize=function(e,t){if(void 0===t&&(t=this.defaultMode),!i.isEmpty(this.lexerDefinitionErrors)){var n=i.map(this.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(e,t)},e.prototype.tokenizeInternal=function(e,t){var n,o,a,s,u,c,l,f,p,d,h,E,T,m,y=this,g=e,A=g.length,v=0,N=0,L=this.hasCustom?0:Math.floor(e.length/10),O=new Array(L),I=[],_=this.trackStartLines?1:void 0,R=this.trackStartLines?1:void 0,S=r.cloneEmptyGroups(this.emptyGroups),C=this.trackStartLines,P=this.config.lineTerminatorsPattern,k=0,x=[],F=[],M=[],b=[];Object.freeze(b);var U=void 0;function D(){return x}function w(e){var t=r.charCodeToOptimizedIndex(e),n=F[t];return void 0===n?b:n}var B,G=function(e){if(1===M.length&&void 0===e.tokenType.PUSH_MODE){var t=y.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);I.push({offset:e.startOffset,line:void 0!==e.startLine?e.startLine:void 0,column:void 0!==e.startColumn?e.startColumn:void 0,length:e.image.length,message:t})}else{M.pop();var n=i.last(M);x=y.patternIdxToConfig[n],F=y.charCodeToPatternIdxToConfig[n],k=x.length;var r=y.canModeBeOptimized[n]&&!1===y.config.safeMode;U=F&&r?w:D}};function W(e){M.push(e),F=this.charCodeToPatternIdxToConfig[e],x=this.patternIdxToConfig[e],k=x.length,k=x.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;U=F&&t?w:D}for(W.call(this,t);v<A;){u=null;var j=g.charCodeAt(v),Y=U(j),K=Y.length;for(n=0;n<K;n++){var V=(B=Y[n]).pattern;if(c=null,!1!==(te=B.short)?j===te&&(u=V):!0===B.isCustom?null!==(m=V.exec(g,v,O,S))?(u=m[0],void 0!==m.payload&&(c=m.payload)):u=null:(this.updateLastIndex(V,v),u=this.match(V,e,v)),null!==u){if(void 0!==(s=B.longerAlt)){var H=x[s],X=H.pattern;l=null,!0===H.isCustom?null!==(m=X.exec(g,v,O,S))?(a=m[0],void 0!==m.payload&&(l=m.payload)):a=null:(this.updateLastIndex(X,v),a=this.match(X,e,v)),a&&a.length>u.length&&(u=a,c=l,B=H)}break}}if(null!==u){if(f=u.length,void 0!==(p=B.group)&&(d=B.tokenTypeIdx,h=this.createTokenInstance(u,v,d,B.tokenType,_,R,f),this.handlePayload(h,c),!1===p?N=this.addToken(O,N,h):S[p].push(h)),e=this.chopInput(e,f),v+=f,R=this.computeNewColumn(R,f),!0===C&&!0===B.canLineTerminator){var Q=0,z=void 0,q=void 0;P.lastIndex=0;do{!0===(z=P.test(u))&&(q=P.lastIndex-1,Q++)}while(!0===z);0!==Q&&(_+=Q,R=f-q,this.updateTokenEndLineColumnLocation(h,p,q,Q,_,R,f))}this.handleModes(B,G,W,h)}else{for(var $=v,Z=_,J=R,ee=!1;!ee&&v<A;)for(g.charCodeAt(v),e=this.chopInput(e,1),v++,o=0;o<k;o++){var te,ne=x[o];V=ne.pattern;if(!1!==(te=ne.short)?g.charCodeAt(v)===te&&(ee=!0):!0===ne.isCustom?ee=null!==V.exec(g,v,O,S):(this.updateLastIndex(V,v),ee=null!==V.exec(e)),!0===ee)break}E=v-$,T=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(g,$,E,Z,J),I.push({offset:$,line:Z,column:J,length:E,message:T})}}return this.hasCustom||(O.length=N),{tokens:O,groups:S,errors:I}},e.prototype.handleModes=function(e,t,n,r){if(!0===e.pop){var i=e.push;t(r),void 0!==i&&n.call(this,i)}else void 0!==e.push&&n.call(this,e.push)},e.prototype.chopInput=function(e,t){return e.substring(t)},e.prototype.updateLastIndex=function(e,t){e.lastIndex=t},e.prototype.updateTokenEndLineColumnLocation=function(e,t,n,r,i,o,a){var s,u;void 0!==t&&(u=(s=n===a-1)?-1:0,1===r&&!0===s||(e.endLine=i+u,e.endColumn=o-1-u))},e.prototype.computeNewColumn=function(e,t){return e+t},e.prototype.createTokenInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},e.prototype.createOffsetOnlyToken=function(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}},e.prototype.createStartOnlyToken=function(e,t,n,r,i,o){return{image:e,startOffset:t,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}},e.prototype.createFullToken=function(e,t,n,r,i,o,a){return{image:e,startOffset:t,endOffset:t+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}},e.prototype.addToken=function(e,t,n){return 666},e.prototype.addTokenUsingPush=function(e,t,n){return e.push(n),t},e.prototype.addTokenUsingMemberAccess=function(e,t,n){return e[t]=n,++t},e.prototype.handlePayload=function(e,t){},e.prototype.handlePayloadNoCustom=function(e,t){},e.prototype.handlePayloadWithCustom=function(e,t){null!==t&&(e.payload=t)},e.prototype.match=function(e,t,n){return null},e.prototype.matchWithTest=function(e,t,n){return!0===e.test(t)?t.substring(n,e.lastIndex):null},e.prototype.matchWithExec=function(e,t){var n=e.exec(t);return null!==n?n[0]:n},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var r=i.timer(t),o=r.time,a=r.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+e+"> time: "+o+"ms"),this.traceInitIndent--,a}return t()},e.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",e.NA=/NOT_APPLICABLE/,e}();t.Lexer=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.collectMethods=t.DslMethodsCollectorVisitor=t.getProductionDslName=t.isBranchingProd=t.isOptionalProd=t.isSequenceProd=void 0;var o=n(0),a=n(1),s=n(5);t.isSequenceProd=function(e){return e instanceof a.Alternative||e instanceof a.Option||e instanceof a.Repetition||e instanceof a.RepetitionMandatory||e instanceof a.RepetitionMandatoryWithSeparator||e instanceof a.RepetitionWithSeparator||e instanceof a.Terminal||e instanceof a.Rule},t.isOptionalProd=function e(t,n){return void 0===n&&(n=[]),!!(t instanceof a.Option||t instanceof a.Repetition||t instanceof a.RepetitionWithSeparator)||(t instanceof a.Alternation?o.some(t.definition,(function(t){return e(t,n)})):!(t instanceof a.NonTerminal&&o.contains(n,t))&&(t instanceof a.AbstractProduction&&(t instanceof a.NonTerminal&&n.push(t),o.every(t.definition,(function(t){return e(t,n)})))))},t.isBranchingProd=function(e){return e instanceof a.Alternation},t.getProductionDslName=function(e){if(e instanceof a.NonTerminal)return"SUBRULE";if(e instanceof a.Option)return"OPTION";if(e instanceof a.Alternation)return"OR";if(e instanceof a.RepetitionMandatory)return"AT_LEAST_ONE";if(e instanceof a.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(e instanceof a.RepetitionWithSeparator)return"MANY_SEP";if(e instanceof a.Repetition)return"MANY";if(e instanceof a.Terminal)return"CONSUME";throw Error("non exhaustive match")};var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.separator="-",t.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},t}return i(t,e),t.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},t.prototype.visitTerminal=function(e){var t=e.terminalType.name+this.separator+"Terminal";o.has(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitNonTerminal=function(e){var t=e.nonTerminalName+this.separator+"Terminal";o.has(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitOption=function(e){this.dslMethods.option.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},t.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},t.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},t}(s.GAstVisitor);t.DslMethodsCollectorVisitor=u;var c=new u;t.collectMethods=function(e){c.reset(),e.accept(c);var t=c.dslMethods;return c.reset(),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGrammarValidatorErrorProvider=t.defaultGrammarResolverErrorProvider=t.defaultParserErrorProvider=void 0;var r=n(3),i=n(0),o=n(0),a=n(1),s=n(9);t.defaultParserErrorProvider={buildMismatchTokenMessage:function(e){var t=e.expected,n=e.actual;e.previous,e.ruleName;return"Expecting "+(r.hasTokenLabel(t)?"--\x3e "+r.tokenLabel(t)+" <--":"token of type --\x3e "+t.name+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;e.ruleName;return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var t=e.expectedPathsPerAlt,n=e.actual,i=(e.previous,e.customUserDescription),a=(e.ruleName,"\nbut found: '"+o.first(n).image+"'");if(i)return"Expecting: "+i+a;var s=o.reduce(t,(function(e,t){return e.concat(t)}),[]),u=o.map(s,(function(e){return"["+o.map(e,(function(e){return r.tokenLabel(e)})).join(", ")+"]"}));return"Expecting: "+("one of these possible Token sequences:\n"+o.map(u,(function(e,t){return"  "+(t+1)+". "+e})).join("\n"))+a},buildEarlyExitMessage:function(e){var t=e.expectedIterationPaths,n=e.actual,i=e.customUserDescription,a=(e.ruleName,"\nbut found: '"+o.first(n).image+"'");return i?"Expecting: "+i+a:"Expecting: "+("expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+o.map(t,(function(e){return"["+o.map(e,(function(e){return r.tokenLabel(e)})).join(",")+"]"})).join(" ,")+">")+a}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(e,t){var n,r=e.name,i=o.first(t),u=i.idx,c=s.getProductionDslName(i),l=(n=i)instanceof a.Terminal?n.terminalType.name:n instanceof a.NonTerminal?n.nonTerminalName:"",f="->"+c+(u>0?u:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return f=(f=f.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+e.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(e){var t=o.map(e.prefixPath,(function(e){return r.tokenLabel(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <"+e.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+n+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(e){var t=o.map(e.prefixPath,(function(e){return r.tokenLabel(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx,i="Ambiguous Alternatives Detected: <"+e.ambiguityIndices.join(" ,")+"> in <OR"+n+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\n";return i+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=s.getProductionDslName(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <"+t+"> within Rule <"+e.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <"+(e.emptyChoiceIdx+1)+"> in <OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n<OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\n has "+(e.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(e){var t=e.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+t+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+(t+" --\x3e "+i.map(e.leftRecursionPath,(function(e){return e.name})).concat([t]).join(" --\x3e "))+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){return"Duplicate definition, rule: ->"+(e.topLevelRule instanceof a.Rule?e.topLevelRule.name:e.topLevelRule)+"<- is already defined in the grammar: ->"+e.grammarName+"<-"}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var o,a=n(0),s=n(12),u=n(13),c=n(4),l=n(1),f=n(5);!function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}(o=t.PROD_TYPE||(t.PROD_TYPE={})),t.getProdType=function(e){if(e instanceof l.Option)return o.OPTION;if(e instanceof l.Repetition)return o.REPETITION;if(e instanceof l.RepetitionMandatory)return o.REPETITION_MANDATORY;if(e instanceof l.RepetitionMandatoryWithSeparator)return o.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof l.RepetitionWithSeparator)return o.REPETITION_WITH_SEPARATOR;if(e instanceof l.Alternation)return o.ALTERNATION;throw Error("non exhaustive match")},t.buildLookaheadFuncForOr=function(e,t,n,r,i,o){var a=y(e,t,n);return o(a,r,v(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher,i)},t.buildLookaheadFuncForOptionalProd=function(e,t,n,r,i,o){var a=g(e,t,i,n),s=v(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher;return o(a[0],s,r)},t.buildAlternativesLookAheadFunc=function(e,t,n,r){var i=e.length,o=a.every(e,(function(e){return a.every(e,(function(e){return 1===e.length}))}));if(t)return function(t){for(var r=a.map(t,(function(e){return e.GATE})),o=0;o<i;o++){var s=e[o],u=s.length,c=r[o];if(void 0===c||!1!==c.call(this))e:for(var l=0;l<u;l++){for(var f=s[l],p=f.length,d=0;d<p;d++){var h=this.LA(d+1);if(!1===n(h,f[d]))continue e}return o}}};if(o&&!r){var s=a.map(e,(function(e){return a.flatten(e)})),u=a.reduce(s,(function(e,t,n){return a.forEach(t,(function(t){a.has(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=n),a.forEach(t.categoryMatches,(function(t){a.has(e,t)||(e[t]=n)}))})),e}),[]);return function(){var e=this.LA(1);return u[e.tokenTypeIdx]}}return function(){for(var t=0;t<i;t++){var r=e[t],o=r.length;e:for(var a=0;a<o;a++){for(var s=r[a],u=s.length,c=0;c<u;c++){var l=this.LA(c+1);if(!1===n(l,s[c]))continue e}return t}}}},t.buildSingleAlternativeLookaheadFunction=function(e,t,n){var r=a.every(e,(function(e){return 1===e.length})),i=e.length;if(r&&!n){var o=a.flatten(e);if(1===o.length&&a.isEmpty(o[0].categoryMatches)){var s=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var u=a.reduce(o,(function(e,t,n){return e[t.tokenTypeIdx]=!0,a.forEach(t.categoryMatches,(function(t){e[t]=!0})),e}),[]);return function(){var e=this.LA(1);return!0===u[e.tokenTypeIdx]}}return function(){e:for(var n=0;n<i;n++){for(var r=e[n],o=r.length,a=0;a<o;a++){var s=this.LA(a+1);if(!1===t(s,r[a]))continue e}return!0}return!1}};var p=function(e){function t(t,n,r){var i=e.call(this)||this;return i.topProd=t,i.targetOccurrence=n,i.targetProdType=r,i}return i(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},t.prototype.checkIsTarget=function(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=n.concat(r),!0)},t.prototype.walkOption=function(t,n,r){this.checkIsTarget(t,o.OPTION,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkAtLeastOne=function(t,n,r){this.checkIsTarget(t,o.REPETITION_MANDATORY,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkAtLeastOneSep=function(t,n,r){this.checkIsTarget(t,o.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkMany=function(t,n,r){this.checkIsTarget(t,o.REPETITION,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkManySep=function(t,n,r){this.checkIsTarget(t,o.REPETITION_WITH_SEPARATOR,n,r)||e.prototype.walkOption.call(this,t,n,r)},t}(u.RestWalker),d=function(e){function t(t,n,r){var i=e.call(this)||this;return i.targetOccurrence=t,i.targetProdType=n,i.targetRef=r,i.result=[],i}return i(t,e),t.prototype.checkIsTarget=function(e,t){e.idx!==this.targetOccurrence||this.targetProdType!==t||void 0!==this.targetRef&&e!==this.targetRef||(this.result=e.definition)},t.prototype.visitOption=function(e){this.checkIsTarget(e,o.OPTION)},t.prototype.visitRepetition=function(e){this.checkIsTarget(e,o.REPETITION)},t.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,o.REPETITION_MANDATORY)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,o.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,o.REPETITION_WITH_SEPARATOR)},t.prototype.visitAlternation=function(e){this.checkIsTarget(e,o.ALTERNATION)},t}(f.GAstVisitor);function h(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}function E(e){for(var t=[""],n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<t.length;o++){var a=t[o];i.push(a+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var u="_"+r.categoryMatches[s];i.push(a+u)}}t=i}return t}function T(e,t,n){for(var r=0;r<e.length;r++)if(r!==n)for(var i=e[r],o=0;o<t.length;o++){if(!0===i[t[o]])return!1}return!0}function m(e,t){for(var n=a.map(e,(function(e){return s.possiblePathsFrom([e],1)})),r=h(n.length),i=a.map(n,(function(e){var t={};return a.forEach(e,(function(e){var n=E(e.partialPath);a.forEach(n,(function(e){t[e]=!0}))})),t})),o=n,u=1;u<=t;u++){var c=o;o=h(c.length);for(var l=function(e){for(var n=c[e],l=0;l<n.length;l++){var f=n[l].partialPath,p=n[l].suffixDef,d=E(f);if(T(i,d,e)||a.isEmpty(p)||f.length===t){var h=r[e];if(!1===A(h,f)){h.push(f);for(var m=0;m<d.length;m++){var y=d[m];i[e][y]=!0}}}else{var g=s.possiblePathsFrom(p,u+1,f);o[e]=o[e].concat(g),a.forEach(g,(function(t){var n=E(t.partialPath);a.forEach(n,(function(t){i[e][t]=!0}))}))}}},f=0;f<c.length;f++)l(f)}return r}function y(e,t,n,r){var i=new d(e,o.ALTERNATION,r);return t.accept(i),m(i.result,n)}function g(e,t,n,r){var i=new d(e,n);t.accept(i);var o=i.result,a=new p(t,e,n).startWalking();return m([new l.Alternative({definition:o}),new l.Alternative({definition:a})],r)}function A(e,t){e:for(var n=0;n<e.length;n++){var r=e[n];if(r.length===t.length){for(var i=0;i<r.length;i++){var o=t[i],a=r[i];if(!1===(o===a||void 0!==a.categoryMatchesMap[o.tokenTypeIdx]))continue e}return!0}}return!1}function v(e){return a.every(e,(function(e){return a.every(e,(function(e){return a.every(e,(function(e){return a.isEmpty(e.categoryMatches)}))}))}))}t.lookAheadSequenceFromAlternatives=m,t.getLookaheadPathsForOr=y,t.getLookaheadPathsForOptionalProd=g,t.containsPath=A,t.isStrictPrefixOfPath=function(e,t){return e.length<t.length&&a.every(e,(function(e,n){var r=t[n];return e===r||r.categoryMatchesMap[e.tokenTypeIdx]}))},t.areTokenCategoriesNotUsed=v},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.nextPossibleTokensAfter=t.possiblePathsFrom=t.NextTerminalAfterAtLeastOneSepWalker=t.NextTerminalAfterAtLeastOneWalker=t.NextTerminalAfterManySepWalker=t.NextTerminalAfterManyWalker=t.AbstractNextTerminalAfterProductionWalker=t.NextAfterTokenWalker=t.AbstractNextPossibleTokensWalker=void 0;var o=n(13),a=n(0),s=n(22),u=n(1),c=function(e){function t(t,n){var r=e.call(this)||this;return r.topProd=t,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return i(t,e),t.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=a.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=a.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},t.prototype.walk=function(t,n){void 0===n&&(n=[]),this.found||e.prototype.walk.call(this,t,n)},t.prototype.walkProdRef=function(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}},t.prototype.updateExpectedNext=function(){a.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},t}(o.RestWalker);t.AbstractNextPossibleTokensWalker=c;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return i(t,e),t.prototype.walkTerminal=function(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var r=t.concat(n),i=new u.Alternative({definition:r});this.possibleTokTypes=s.first(i),this.found=!0}},t}(c);t.NextAfterTokenWalker=l;var f=function(e){function t(t,n){var r=e.call(this)||this;return r.topRule=t,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return i(t,e),t.prototype.startWalking=function(){return this.walk(this.topRule),this.result},t}(o.RestWalker);t.AbstractNextTerminalAfterProductionWalker=f;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.walkMany=function(t,n,r){if(t.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkMany.call(this,t,n,r)},t}(f);t.NextTerminalAfterManyWalker=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.walkManySep=function(t,n,r){if(t.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkManySep.call(this,t,n,r)},t}(f);t.NextTerminalAfterManySepWalker=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.walkAtLeastOne=function(t,n,r){if(t.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOne.call(this,t,n,r)},t}(f);t.NextTerminalAfterAtLeastOneWalker=h;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.walkAtLeastOneSep=function(t,n,r){if(t.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof u.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOneSep.call(this,t,n,r)},t}(f);function T(e,t,n,r){var i=a.cloneArr(n);i.push(e.name);var o=a.cloneArr(r);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}t.NextTerminalAfterAtLeastOneSepWalker=E,t.possiblePathsFrom=function e(t,n,r){void 0===r&&(r=[]),r=a.cloneArr(r);var i=[],o=0;function s(s){var u=e(s.concat(a.drop(t,o+1)),n,r);return i.concat(u)}for(;r.length<n&&o<t.length;){var c=t[o];if(c instanceof u.Alternative)return s(c.definition);if(c instanceof u.NonTerminal)return s(c.definition);if(c instanceof u.Option)i=s(c.definition);else{if(c instanceof u.RepetitionMandatory)return s(l=c.definition.concat([new u.Repetition({definition:c.definition})]));if(c instanceof u.RepetitionMandatoryWithSeparator)return s(l=[new u.Alternative({definition:c.definition}),new u.Repetition({definition:[new u.Terminal({terminalType:c.separator})].concat(c.definition)})]);if(c instanceof u.RepetitionWithSeparator){var l=c.definition.concat([new u.Repetition({definition:[new u.Terminal({terminalType:c.separator})].concat(c.definition)})]);i=s(l)}else if(c instanceof u.Repetition){l=c.definition.concat([new u.Repetition({definition:c.definition})]);i=s(l)}else{if(c instanceof u.Alternation)return a.forEach(c.definition,(function(e){!1===a.isEmpty(e.definition)&&(i=s(e.definition))})),i;if(!(c instanceof u.Terminal))throw Error("non exhaustive match");r.push(c.terminalType)}}o++}return i.push({partialPath:r,suffixDef:a.drop(t,o)}),i},t.nextPossibleTokensAfter=function(e,t,n,r){var i=["EXIT_NONE_TERMINAL"],o=!1,s=t.length,c=s-r-1,l=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!a.isEmpty(f);){var p=f.pop();if("EXIT_ALTERNATIVE"!==p){var d=p.def,h=p.idx,E=p.ruleStack,m=p.occurrenceStack;if(!a.isEmpty(d)){var y=d[0];if("EXIT_NONE_TERMINAL"===y){var g={idx:h,def:a.drop(d),ruleStack:a.dropRight(E),occurrenceStack:a.dropRight(m)};f.push(g)}else if(y instanceof u.Terminal)if(h<s-1){var A=h+1;if(n(t[A],y.terminalType)){g={idx:A,def:a.drop(d),ruleStack:E,occurrenceStack:m};f.push(g)}}else{if(h!==s-1)throw Error("non exhaustive match");l.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:E,occurrenceStack:m}),o=!0}else if(y instanceof u.NonTerminal){var v=a.cloneArr(E);v.push(y.nonTerminalName);var N=a.cloneArr(m);N.push(y.idx);g={idx:h,def:y.definition.concat(i,a.drop(d)),ruleStack:v,occurrenceStack:N};f.push(g)}else if(y instanceof u.Option){var L={idx:h,def:a.drop(d),ruleStack:E,occurrenceStack:m};f.push(L),f.push("EXIT_ALTERNATIVE");var O={idx:h,def:y.definition.concat(a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(O)}else if(y instanceof u.RepetitionMandatory){var I=new u.Repetition({definition:y.definition,idx:y.idx});g={idx:h,def:y.definition.concat([I],a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(g)}else if(y instanceof u.RepetitionMandatoryWithSeparator){var _=new u.Terminal({terminalType:y.separator});I=new u.Repetition({definition:[_].concat(y.definition),idx:y.idx}),g={idx:h,def:y.definition.concat([I],a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(g)}else if(y instanceof u.RepetitionWithSeparator){L={idx:h,def:a.drop(d),ruleStack:E,occurrenceStack:m};f.push(L),f.push("EXIT_ALTERNATIVE");_=new u.Terminal({terminalType:y.separator});var R=new u.Repetition({definition:[_].concat(y.definition),idx:y.idx});O={idx:h,def:y.definition.concat([R],a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(O)}else if(y instanceof u.Repetition){L={idx:h,def:a.drop(d),ruleStack:E,occurrenceStack:m};f.push(L),f.push("EXIT_ALTERNATIVE");R=new u.Repetition({definition:y.definition,idx:y.idx}),O={idx:h,def:y.definition.concat([R],a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(O)}else if(y instanceof u.Alternation)for(var S=y.definition.length-1;S>=0;S--){var C={idx:h,def:y.definition[S].definition.concat(a.drop(d)),ruleStack:E,occurrenceStack:m};f.push(C),f.push("EXIT_ALTERNATIVE")}else if(y instanceof u.Alternative)f.push({idx:h,def:y.definition.concat(a.drop(d)),ruleStack:E,occurrenceStack:m});else{if(!(y instanceof u.Rule))throw Error("non exhaustive match");f.push(T(y,h,E,m))}}}else o&&a.last(f).idx<=c&&f.pop()}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestWalker=void 0;var r=n(0),i=n(1),o=function(){function e(){}return e.prototype.walk=function(e,t){var n=this;void 0===t&&(t=[]),r.forEach(e.definition,(function(o,a){var s=r.drop(e.definition,a+1);if(o instanceof i.NonTerminal)n.walkProdRef(o,s,t);else if(o instanceof i.Terminal)n.walkTerminal(o,s,t);else if(o instanceof i.Alternative)n.walkFlat(o,s,t);else if(o instanceof i.Option)n.walkOption(o,s,t);else if(o instanceof i.RepetitionMandatory)n.walkAtLeastOne(o,s,t);else if(o instanceof i.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(o,s,t);else if(o instanceof i.RepetitionWithSeparator)n.walkManySep(o,s,t);else if(o instanceof i.Repetition)n.walkMany(o,s,t);else{if(!(o instanceof i.Alternation))throw Error("non exhaustive match");n.walkOr(o,s,t)}}))},e.prototype.walkTerminal=function(e,t,n){},e.prototype.walkProdRef=function(e,t,n){},e.prototype.walkFlat=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkOption=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkAtLeastOne=function(e,t,n){var r=[new i.Option({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkAtLeastOneSep=function(e,t,n){var r=a(e,t,n);this.walk(e,r)},e.prototype.walkMany=function(e,t,n){var r=[new i.Option({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkManySep=function(e,t,n){var r=a(e,t,n);this.walk(e,r)},e.prototype.walkOr=function(e,t,n){var o=this,a=t.concat(n);r.forEach(e.definition,(function(e){var t=new i.Alternative({definition:[e]});o.walk(t,a)}))},e}();function a(e,t,n){return[new i.Option({definition:[new i.Terminal({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}t.RestWalker=o},function(e,t,n){var r,i,o;"undefined"!=typeof self&&self,i=[],void 0===(o="function"==typeof(r=function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx},e.prototype.pattern=function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":s(n,"global");break;case"i":s(n,"ignoreCase");break;case"m":s(n,"multiLine");break;case"u":s(n,"unicode");break;case"y":s(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}},e.prototype.disjunction=function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}},e.prototype.alternative=function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}u(t);var n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}!function(){throw Error("Internal Error - Should never get here!")}()},e.prototype.quantifier=function(e){var t,n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":t=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;u(t)}if(!0!==e||void 0!==t)return u(t),"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t},e.prototype.atom=function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),u(e),e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[o("\n"),o("\r"),o("\u2028"),o("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},e.prototype.characterClassEscape=function(){var e,t=!1;switch(this.popChar()){case"d":e=c;break;case"D":e=c,t=!0;break;case"s":e=f;break;case"S":e=f,t=!0;break;case"w":e=l;break;case"W":e=l,t=!0}return u(e),{type:"Set",value:e,complement:t}},e.prototype.controlEscapeAtom=function(){var e;switch(this.popChar()){case"f":e=o("\f");break;case"n":e=o("\n");break;case"r":e=o("\r");break;case"t":e=o("\t");break;case"v":e=o("\v")}return u(e),{type:"Character",value:e}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:o("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){return{type:"Character",value:o(this.popChar())}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:o(this.popChar())}}},e.prototype.characterClass=function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:r.value})}else a(n.value,e),e.push(o("-")),a(r.value,e)}else a(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:o("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++}var t=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n},e.prototype.positiveInteger=function(){var e=this.popChar();if(!1===i.test(e))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.integerIncludingZero=function(){var e=this.popChar();if(!1===r.test(e))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.patternCharacter=function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:o(e)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},e.prototype.isDigit=function(){return r.test(this.peekChar(0))},e.prototype.isClassAtom=function(e){switch(void 0===e&&(e=0),this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},e.prototype.isQuantifier=function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e){return!1}finally{this.restoreState(e)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(e){for(var t="",r=0;r<e;r++){var i=this.popChar();if(!1===n.test(i))throw Error("Expecting a HexDecimal digits");t+=i}return{type:"Character",value:parseInt(t,16)}},e.prototype.peekChar=function(e){return void 0===e&&(e=0),this.input[this.idx+e]},e.prototype.popChar=function(){var e=this.peekChar(0);return this.consumeChar(),e},e.prototype.consumeChar=function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},e.prototype.loc=function(e){return{begin:e,end:this.idx}};var t,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function o(e){return e.charCodeAt(0)}function a(e,t){void 0!==e.length?e.forEach((function(e){t.push(e)})):t.push(e)}function s(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t]=!0}function u(e){if(void 0===e)throw Error("Internal Error - Should never get here!")}var c=[];for(t=o("0");t<=o("9");t++)c.push(t);var l=[o("_")].concat(c);for(t=o("a");t<=o("z");t++)l.push(t);for(t=o("A");t<=o("Z");t++)l.push(t);var f=[o(" "),o("\f"),o("\n"),o("\r"),o("\t"),o("\v"),o("\t"),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o("\u2028"),o("\u2029"),o(" "),o(" "),o("　"),o("\ufeff")];function p(){}return p.prototype.visitChildren=function(e){for(var t in e){var n=e[t];e.hasOwnProperty(t)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(e){this.visit(e)}),this))}},p.prototype.visit=function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)},p.prototype.visitPattern=function(e){},p.prototype.visitFlags=function(e){},p.prototype.visitDisjunction=function(e){},p.prototype.visitAlternative=function(e){},p.prototype.visitStartAnchor=function(e){},p.prototype.visitEndAnchor=function(e){},p.prototype.visitWordBoundary=function(e){},p.prototype.visitNonWordBoundary=function(e){},p.prototype.visitLookahead=function(e){},p.prototype.visitNegativeLookahead=function(e){},p.prototype.visitCharacter=function(e){},p.prototype.visitSet=function(e){},p.prototype.visitGroup=function(e){},p.prototype.visitGroupBackReference=function(e){},p.prototype.visitQuantifier=function(e){},{RegExpParser:e,BaseRegExpVisitor:p,VERSION:"0.5.0"}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegExpParserCache=t.getRegExpAst=void 0;var r=n(14),i={},o=new r.RegExpParser;t.getRegExpAst=function(e){var t=e.toString();if(i.hasOwnProperty(t))return i[t];var n=o.pattern(t);return i[t]=n,n},t.clearRegExpParserCache=function(){i={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyForAutomaticLookahead=t.AT_LEAST_ONE_SEP_IDX=t.MANY_SEP_IDX=t.AT_LEAST_ONE_IDX=t.MANY_IDX=t.OPTION_IDX=t.OR_IDX=t.BITS_FOR_ALT_IDX=t.BITS_FOR_RULE_IDX=t.BITS_FOR_OCCURRENCE_IDX=t.BITS_FOR_METHOD_TYPE=void 0,t.BITS_FOR_METHOD_TYPE=4,t.BITS_FOR_OCCURRENCE_IDX=8,t.BITS_FOR_RULE_IDX=12,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_OCCURRENCE_IDX,t.OPTION_IDX=2<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_IDX=3<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_OCCURRENCE_IDX,t.getKeyForAutomaticLookahead=function(e,t,n){return n|t|e};t.BITS_FOR_ALT_IDX},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryValid=t.parseQuery=void 0;var a=n(7),s=n(28),u=(new s.SoqlParser).getBaseCstVisitorConstructor(),c=["TRUE","FALSE"],l=["YESTERDAY","TODAY","TOMORROW","LAST_WEEK","THIS_WEEK","NEXT_WEEK","LAST_MONTH","THIS_MONTH","NEXT_MONTH","LAST_90_DAYS","NEXT_90_DAYS","THIS_QUARTER","LAST_QUARTER","NEXT_QUARTER","THIS_YEAR","LAST_YEAR","NEXT_YEAR","THIS_FISCAL_QUARTER","LAST_FISCAL_QUARTER","NEXT_FISCAL_QUARTER","THIS_FISCAL_YEAR","LAST_FISCAL_YEAR","NEXT_FISCAL_YEAR"],f=["NEXT_N_DAYS","LAST_N_DAYS","N_DAYS_AGO","NEXT_N_WEEKS","LAST_N_WEEKS","N_WEEKS_AGO","NEXT_N_MONTHS","LAST_N_MONTHS","N_MONTHS_AGO","NEXT_N_QUARTERS","LAST_N_QUARTERS","N_QUARTERS_AGO","NEXT_N_YEARS","LAST_N_YEARS","N_YEARS_AGO","NEXT_N_FISCAL_QUARTERS","LAST_N_FISCAL_QUARTERS","N_FISCAL_QUARTERS_AGO","NEXT_N_FISCAL_YEARS","LAST_N_FISCAL_YEARS","N_FISCAL_YEARS_AGO"],p=new(function(e){function t(){var t=e.call(this)||this;return t.helpers={$_getFieldFunction:function(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var i=e.functionExpression?e.functionExpression.map((function(n){return t.visit(e.functionExpression,{includeType:r})})).flat():[],o={};return r&&(o.type="FieldFunctionExpression"),o.functionName=e.fn[0].tokenType.name,o.parameters=i,r&&n&&(o.isAggregateFn=n),o.rawValue=e.fn[0].image+"("+i.map((function(e){return"string"==typeof e?e:e.rawValue})).join(", ")+")",o},$_getLiteralTypeFromTokenType:function(e){return"REAL_NUMBER"===e?"DECIMAL":"CURRENCY_PREFIXED_DECIMAL"===e?"DECIMAL_WITH_CURRENCY_PREFIX":"CURRENCY_PREFIXED_INTEGER"===e?"INTEGER_WITH_CURRENCY_PREFIX":"SIGNED_DECIMAL"===e||"UNSIGNED_DECIMAL"===e?"DECIMAL":"UNSIGNED_INTEGER"===e||"SIGNED_INTEGER"===e?"INTEGER":"DATETIME"===e?"DATETIME":"DATE"===e?"DATE":"NULL"===e?"NULL":"StringIdentifier"===e||"Identifier"===e?"STRING":c.includes(e)?"BOOLEAN":l.includes(e)?"DATE_LITERAL":f.includes(e)?"DATE_N_LITERAL":"STRING"}},t.validateVisitor(),t}return i(t,e),t.prototype.selectStatement=function(e,t){var n=this,r=(t||{isSubquery:!1}).isSubquery,i={};if(i.fields=this.visit(e.selectClause),a.isSubqueryFromFlag(i,r)){var o=this.visit(e.fromClause),s=o.sObject,u=o.alias,c=o.sObjectPrefix;i.relationshipName=s,u&&(i.sObjectAlias=u),c&&(i.sObjectPrefix=c)}else{var l=this.visit(e.fromClause);s=l.sObject,u=l.alias;i.sObject=s,u&&(i.sObjectAlias=u)}return i.sObjectAlias&&i.fields.forEach((function(e){e.relationships&&e.relationships[0]===i.sObjectAlias&&(e.relationships=e.relationships.slice(1),e.objectPrefix=i.sObjectAlias),e.relationships&&0===e.relationships.length&&(delete e.relationships,e.type="Field")})),e.usingScopeClause&&(i.usingScope=this.visit(e.usingScopeClause)),e.whereClause&&(i.where=this.visit(e.whereClause)),e.withClause&&e.withClause.forEach((function(e){var t=n.visit(e),r=t.withSecurityEnforced,o=t.withDataCategory;r&&(i.withSecurityEnforced=r),o&&(i.withDataCategory=o)})),e.groupByClause&&(i.groupBy=this.visit(e.groupByClause)),e.havingClause&&(i.having=this.visit(e.havingClause)),e.orderByClause&&(i.orderBy=this.visit(e.orderByClause)),e.limitClause&&(i.limit=Number(this.visit(e.limitClause))),e.offsetClause&&(i.offset=Number(this.visit(e.offsetClause))),e.forViewOrReference&&(i.for=this.visit(e.forViewOrReference)),e.updateTrackingViewstat&&(i.update=this.visit(e.updateTrackingViewstat)),i},t.prototype.selectClause=function(e){var t=this;return e.field?e.field.map((function(e){if(a.isToken(e)){var n=e.image,r=void 0;if(n.includes(".")){var i=n.split(".");r={type:"FieldRelationship",field:i[i.length-1],relationships:i.slice(0,i.length-1),rawValue:n}}else r={type:"Field",field:n};return r}return t.visit(e)})):[]},t.prototype.selectClauseFunctionIdentifier=function(e){var t=o({},this.visit(e.fn));return e.alias&&(t.alias=e.alias[0].image),t},t.prototype.selectClauseSubqueryIdentifier=function(e){return{type:"FieldSubquery",subquery:this.visit(e.selectStatement,{isSubquery:!0})}},t.prototype.selectClauseTypeOf=function(e){var t=this,n=e.selectClauseTypeOfThen.map((function(e){return t.visit(e)}));return e.selectClauseTypeOfElse&&n.push(this.visit(e.selectClauseTypeOfElse)),{type:"FieldTypeof",field:e.typeOfField[0].image,conditions:n}},t.prototype.selectClauseIdentifier=function(e){var t,n=e.field[0],r=e.alias?e.alias[0].image:void 0,i=n.image;if(i.includes(".")){var o=i.split(".");t={type:"FieldRelationship",field:o[o.length-1],relationships:o.slice(0,o.length-1),rawValue:i}}else t={type:"Field",field:i};return r&&(t.alias=r),t},t.prototype.selectClauseTypeOfThen=function(e){return{type:"WHEN",objectType:e.typeOfField[0].image,fieldList:e.field.map((function(e){return e.image}))}},t.prototype.selectClauseTypeOfElse=function(e){return{type:"ELSE",fieldList:e.field.map((function(e){return e.image}))}},t.prototype.fromClause=function(e){var t,n=e.Identifier[0].image;if(n.includes(".")){var r=n.split(".");t={sObjectPrefix:r.slice(0,r.length-1),sObject:r[r.length-1]}}else t={sObject:n};return e.alias&&e.alias[0]&&(t.alias=e.alias[0].image),t},t.prototype.usingScopeClause=function(e){return e.UsingScopeEnumeration[0].image},t.prototype.whereClauseSubqueryIdentifier=function(e){return this.visit(e.selectStatement,{isSubquery:!1})},t.prototype.whereClause=function(e){var t=this;return e.conditionExpression.reduce((function(e,n){if(e.expressionTree){r=t.visit(n,{prevExpression:e.prevExpression});e.prevExpression.right=r,e.prevExpression=r.right?r.right:r}else{var r=t.visit(n);e.expressionTree=r,e.prevExpression=r.right?r.right:r}return e}),{prevExpression:void 0,expressionTree:void 0}).expressionTree},t.prototype.conditionExpression=function(e,t){(t=t||{}).prevExpression&&e.logicalOperator&&(t.prevExpression.operator=e.logicalOperator[0].tokenType.name);var n={},r=n;return Array.isArray(e.expressionNegation)&&(r=(n=this.visit(e.expressionNegation)).right),r.left=this.visit(e.expression),n},t.prototype.withClause=function(e){return e.withSecurityEnforced?{withSecurityEnforced:!0}:{withDataCategory:{conditions:this.visit(e.withDataCategory)}}},t.prototype.withDataCategory=function(e){var t=this;return e.withDataCategoryArr.map((function(e){return t.visit(e)}))},t.prototype.withDataCategoryArr=function(e){return{groupName:e.dataCategoryGroupName[0].image,selector:e.filteringSelector[0].image,parameters:e.dataCategoryName.map((function(e){return e.image}))}},t.prototype.groupByClause=function(e){var t=this;return e.groupBy.map((function(e){return a.isToken(e)?{field:e.image}:{fn:t.visit(e,{includeType:!1})}}))},t.prototype.havingClause=function(e){var t=this;return e.conditionExpression.reduce((function(e,n){return e.expressionTree?(e.prevExpression.right=t.visit(n,{prevExpression:e.prevExpression}),e.prevExpression=e.prevExpression.right):(e.expressionTree=t.visit(n),e.prevExpression=e.expressionTree),e}),{prevExpression:void 0,expressionTree:void 0}).expressionTree},t.prototype.orderByClause=function(e){var t=this;return e.orderByExpressionOrFn.map((function(e){return t.visit(e)}))},t.prototype.orderByExpression=function(e){var t={field:e.Identifier[0].image};return e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t},t.prototype.orderByGroupingFunctionExpression=function(e){var t={fn:this.helpers.$_getFieldFunction(e,!1,!1)};return e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t},t.prototype.orderBySpecialFunctionExpression=function(e){var t={};return e.aggregateFunction?t.fn=this.visit(e.aggregateFunction,{includeType:!1}):e.dateFunction?t.fn=this.visit(e.dateFunction,{includeType:!1}):e.locationFunction&&(t.fn=this.visit(e.locationFunction,{includeType:!1})),e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t},t.prototype.limitClause=function(e){return e.value[0].image},t.prototype.offsetClause=function(e){return e.value[0].image},t.prototype.dateFunction=function(e,t){return void 0===t&&(t={includeType:!0}),this.helpers.$_getFieldFunction(e,!1,t.includeType)},t.prototype.aggregateFunction=function(e,t){return void 0===t&&(t={includeType:!0}),this.helpers.$_getFieldFunction(e,!0,t.includeType)},t.prototype.fieldsFunction=function(e,t){void 0===t&&(t={includeType:!0});var n={};return t.includeType&&(n.type="FieldFunctionExpression"),(n=o(o({},n),{functionName:"FIELDS",parameters:[e.params[0].image]})).rawValue="FIELDS("+n.parameters[0]+")",n},t.prototype.otherFunction=function(e,t){return void 0===t&&(t={includeType:!0}),this.helpers.$_getFieldFunction(e,!1,t.includeType)},t.prototype.cubeFunction=function(e){return this.helpers.$_getFieldFunction(e,!1,!1)},t.prototype.rollupFunction=function(e){return this.helpers.$_getFieldFunction(e,!1,!1)},t.prototype.locationFunction=function(e,t){void 0===t&&(t={includeType:!0});var n={};return t.includeType&&(n.type="FieldFunctionExpression"),n=o(o({},n),{functionName:"DISTANCE",parameters:[e.location1[0].image,a.isToken(e.location2)?e.location2[0].image:this.visit(e.location2,t),e.unit[0].image]}),t.includeType&&(n.isAggregateFn=!0),n.rawValue="DISTANCE("+n.parameters[0]+", "+(a.isString(n.parameters[1])?n.parameters[1]:n.parameters[1].rawValue)+", "+n.parameters[2]+")",n},t.prototype.geolocationFunction=function(e,t){void 0===t&&(t={includeType:!0});var n={};return t.includeType&&(n.type="FieldFunctionExpression"),n=o(o({},n),{functionName:"GEOLOCATION",parameters:[e.latitude[0].image,e.longitude[0].image],rawValue:"GEOLOCATION("+e.latitude[0].image+", "+e.longitude[0].image+")"})},t.prototype.functionExpression=function(e,t){var n=this;return void 0===t&&(t={includeType:!0}),e.params?e.params.map((function(e){return e.image?e.image:n.visit(e,t)})):[]},t.prototype.expression=function(e){var t=this.visit(e.operator,{returnLiteralType:!0}),n=t.value,r=t.literalType,i=t.dateLiteralVariable,o=t.operator,s={};return a.isToken(e.lhs)?s.field=e.lhs[0].image:s.fn=this.visit(e.lhs,{includeType:!1}),s.operator=o,"SUBQUERY"===r?s.valueQuery=n:(s.value=n,s.literalType=r),i&&(s.dateLiteralVariable=i),e.L_PAREN&&(s.openParen=e.L_PAREN.length),e.R_PAREN&&(s.closeParen=e.R_PAREN.length),s},t.prototype.expressionPartWithNegation=function(e){return{left:e.L_PAREN?{openParen:e.L_PAREN.length}:null,operator:"NOT",right:{left:{}}}},t.prototype.expressionWithRelationalOperator=function(e){return o({operator:this.visit(e.relationalOperator)||this.visit(e.setOperator)},this.visit(e.rhs,{returnLiteralType:!0}))},t.prototype.expressionWithSetOperator=function(e){return o({operator:this.visit(e.relationalOperator)||this.visit(e.setOperator)},this.visit(e.rhs,{returnLiteralType:!0}))},t.prototype.atomicExpression=function(e,t){var n,r,i,o=this;if(t=t||{},e.apexBindVariableExpression)n=this.visit(e.apexBindVariableExpression),r="APEX_BIND_VARIABLE";else if(e.NumberIdentifier)n=e.NumberIdentifier[0].image,r=this.helpers.$_getLiteralTypeFromTokenType(e.NumberIdentifier[0].tokenType.name);else if(e.UnsignedInteger)n=e.UnsignedInteger[0].image,r="INTEGER";else if(e.SignedInteger)n=e.SignedInteger[0].image,r="INTEGER";else if(e.RealNumber)n=e.RealNumber[0].image,r="DECIMAL";else if(e.DateIdentifier)n=e.DateIdentifier[0].image,r=this.helpers.$_getLiteralTypeFromTokenType(e.DateIdentifier[0].tokenType.name);else if(e.CurrencyPrefixedInteger)n=e.CurrencyPrefixedInteger[0].image,r="INTEGER_WITH_CURRENCY_PREFIX";else if(e.CurrencyPrefixedDecimal)n=e.CurrencyPrefixedDecimal[0].image,r="DECIMAL_WITH_CURRENCY_PREFIX";else if(e.DateTime)n=e.DateTime[0].image,r="DATETIME";else if(e.date)n=e.DateToken[0].image,r="DATE";else if(e.NULL)n="NULL",r="NULL";else if(e.StringIdentifier)n=e.StringIdentifier[0].image,r="STRING";else if(e.Identifier)n=e.Identifier[0].image,r="STRING";else if(e.booleanValue)n=this.visit(e.booleanValue),r="BOOLEAN";else if(e.DateLiteral)n=e.DateLiteral[0].image,r="DATE_LITERAL";else if(e.dateNLiteral){var a=this.visit(e.dateNLiteral);n=a.value,i=a.variable,r="DATE_N_LITERAL"}else if(e.arrayExpression){var s=this.visit(e.arrayExpression);n=s.map((function(e){return e.value}));var u=s.map((function(e){return e.variable||null}));u.some((function(e){return null!==e}))&&(i=u),r=(r=1===new Set(s.map((function(e){return e.type}))).size?this.helpers.$_getLiteralTypeFromTokenType(s[0].type):s.map((function(e){return o.helpers.$_getLiteralTypeFromTokenType(e.type)})))||"STRING"}else e.whereClauseSubqueryIdentifier&&(n=this.visit(e.whereClauseSubqueryIdentifier),r="SUBQUERY");return t.returnLiteralType?{value:n,literalType:r,dateLiteralVariable:i}:n},t.prototype.apexBindVariableExpression=function(e){return e.Identifier[0].image},t.prototype.arrayExpression=function(e){var t=this;return e.value.map((function(e){return a.isToken(e)?{type:e.tokenType.name,value:e.image}:t.visit(e,{includeType:!0})}))},t.prototype.relationalOperator=function(e){return e.operator[0].image},t.prototype.setOperator=function(e){return e.operator[0].tokenType.name.replace("_"," ")},t.prototype.booleanValue=function(e){return e.boolean[0].tokenType.name},t.prototype.dateNLiteral=function(e,t){var n={value:e.dateNLiteral[0].image+":"+e.variable[0].image,variable:Number(e.variable[0].image)};return t&&t.includeType&&(n.type=e.dateNLiteral[0].tokenType.name),n},t.prototype.forViewOrReference=function(e){return e.value[0].tokenType.name},t.prototype.updateTrackingViewstat=function(e){return e.value[0].tokenType.name},t}(u));t.parseQuery=function(e,t){return p.visit(s.parse(e,t))},t.isQueryValid=function(e,t){try{return s.parse(e,t),!0}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.createSyntaxDiagramsCode=t.clearCache=t.GAstVisitor=t.serializeProduction=t.serializeGrammar=t.Terminal=t.Rule=t.RepetitionWithSeparator=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Repetition=t.Option=t.NonTerminal=t.Alternative=t.Alternation=t.defaultLexerErrorProvider=t.NoViableAltException=t.NotAllInputParsedException=t.MismatchedTokenException=t.isRecognitionException=t.EarlyExitException=t.defaultParserErrorProvider=t.tokenName=t.tokenMatcher=t.tokenLabel=t.EOF=t.createTokenInstance=t.createToken=t.LexerDefinitionErrorType=t.Lexer=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.EmbeddedActionsParser=t.CstParser=t.VERSION=void 0;var r=n(19);Object.defineProperty(t,"VERSION",{enumerable:!0,get:function(){return r.VERSION}});var i=n(2);Object.defineProperty(t,"CstParser",{enumerable:!0,get:function(){return i.CstParser}}),Object.defineProperty(t,"EmbeddedActionsParser",{enumerable:!0,get:function(){return i.EmbeddedActionsParser}}),Object.defineProperty(t,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return i.ParserDefinitionErrorType}}),Object.defineProperty(t,"EMPTY_ALT",{enumerable:!0,get:function(){return i.EMPTY_ALT}});var o=n(8);Object.defineProperty(t,"Lexer",{enumerable:!0,get:function(){return o.Lexer}}),Object.defineProperty(t,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return o.LexerDefinitionErrorType}});var a=n(3);Object.defineProperty(t,"createToken",{enumerable:!0,get:function(){return a.createToken}}),Object.defineProperty(t,"createTokenInstance",{enumerable:!0,get:function(){return a.createTokenInstance}}),Object.defineProperty(t,"EOF",{enumerable:!0,get:function(){return a.EOF}}),Object.defineProperty(t,"tokenLabel",{enumerable:!0,get:function(){return a.tokenLabel}}),Object.defineProperty(t,"tokenMatcher",{enumerable:!0,get:function(){return a.tokenMatcher}}),Object.defineProperty(t,"tokenName",{enumerable:!0,get:function(){return a.tokenName}});var s=n(10);Object.defineProperty(t,"defaultParserErrorProvider",{enumerable:!0,get:function(){return s.defaultParserErrorProvider}});var u=n(6);Object.defineProperty(t,"EarlyExitException",{enumerable:!0,get:function(){return u.EarlyExitException}}),Object.defineProperty(t,"isRecognitionException",{enumerable:!0,get:function(){return u.isRecognitionException}}),Object.defineProperty(t,"MismatchedTokenException",{enumerable:!0,get:function(){return u.MismatchedTokenException}}),Object.defineProperty(t,"NotAllInputParsedException",{enumerable:!0,get:function(){return u.NotAllInputParsedException}}),Object.defineProperty(t,"NoViableAltException",{enumerable:!0,get:function(){return u.NoViableAltException}});var c=n(21);Object.defineProperty(t,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return c.defaultLexerErrorProvider}});var l=n(1);Object.defineProperty(t,"Alternation",{enumerable:!0,get:function(){return l.Alternation}}),Object.defineProperty(t,"Alternative",{enumerable:!0,get:function(){return l.Alternative}}),Object.defineProperty(t,"NonTerminal",{enumerable:!0,get:function(){return l.NonTerminal}}),Object.defineProperty(t,"Option",{enumerable:!0,get:function(){return l.Option}}),Object.defineProperty(t,"Repetition",{enumerable:!0,get:function(){return l.Repetition}}),Object.defineProperty(t,"RepetitionMandatory",{enumerable:!0,get:function(){return l.RepetitionMandatory}}),Object.defineProperty(t,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return l.RepetitionMandatoryWithSeparator}}),Object.defineProperty(t,"RepetitionWithSeparator",{enumerable:!0,get:function(){return l.RepetitionWithSeparator}}),Object.defineProperty(t,"Rule",{enumerable:!0,get:function(){return l.Rule}}),Object.defineProperty(t,"Terminal",{enumerable:!0,get:function(){return l.Terminal}});var f=n(1);Object.defineProperty(t,"serializeGrammar",{enumerable:!0,get:function(){return f.serializeGrammar}}),Object.defineProperty(t,"serializeProduction",{enumerable:!0,get:function(){return f.serializeProduction}});var p=n(5);Object.defineProperty(t,"GAstVisitor",{enumerable:!0,get:function(){return p.GAstVisitor}}),t.clearCache=function(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")};var d=n(45);Object.defineProperty(t,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return d.createSyntaxDiagramsCode}});var h=function(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\t\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")};t.Parser=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="9.0.1"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var o=n(14),a=n(8),s=n(0),u=n(30),c=n(15),l="PATTERN";function f(e){var t=s.filter(e,(function(e){return!s.has(e,l)}));return{errors:s.map(t,(function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:a.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[e]}})),valid:s.difference(e,t)}}function p(e){var t=s.filter(e,(function(e){var t=e[l];return!(s.isRegExp(t)||s.isFunction(t)||s.has(t,"exec")||s.isString(t))}));return{errors:s.map(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:a.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[e]}})),valid:s.difference(e,t)}}t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY="boolean"==typeof new RegExp("(?:)").sticky,t.disableSticky=function(){t.SUPPORT_STICKY=!1},t.enableSticky=function(){t.SUPPORT_STICKY=!0},t.analyzeTokenTypes=function(e,n){var r,i=(n=s.defaults(n,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;i("initCharCodeToOptimizedIndexMap",(function(){!function(){if(s.isEmpty(k)){k=new Array(65536);for(var e=0;e<65536;e++)k[e]=e>255?255+~~(e/255):e}}()})),i("Reject Lexer.NA",(function(){r=s.reject(e,(function(e){return e[l]===a.Lexer.NA}))}));var o,c,f,p,d,h,E,T,m,y,g,A=!1;i("Transform Patterns",(function(){A=!1,o=s.map(r,(function(e){var t=e[l];if(s.isRegExp(t)){var r=t.source;return 1!==r.length||"^"===r||"$"===r||"."===r||t.ignoreCase?2!==r.length||"\\"!==r[0]||s.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?n.useSticky?O(t):L(t):r[1]:r}if(s.isFunction(t))return A=!0,{exec:t};if(s.has(t,"exec"))return A=!0,t;if("string"==typeof t){if(1===t.length)return t;var i=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),o=new RegExp(i);return n.useSticky?O(o):L(o)}throw Error("non exhaustive match")}))})),i("misc mapping",(function(){c=s.map(r,(function(e){return e.tokenTypeIdx})),f=s.map(r,(function(e){var t=e.GROUP;if(t!==a.Lexer.SKIPPED){if(s.isString(t))return t;if(s.isUndefined(t))return!1;throw Error("non exhaustive match")}})),p=s.map(r,(function(e){var t=e.LONGER_ALT;if(t)return s.indexOf(r,t)})),d=s.map(r,(function(e){return e.PUSH_MODE})),h=s.map(r,(function(e){return s.has(e,"POP_MODE")}))})),i("Line Terminator Handling",(function(){var e=C(n.lineTerminatorCharacters);E=s.map(r,(function(e){return!1})),"onlyOffset"!==n.positionTracking&&(E=s.map(r,(function(t){return s.has(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===R(t,e)?u.canMatchCharCode(e,t.PATTERN):void 0})))})),i("Misc Mapping #2",(function(){T=s.map(r,I),m=s.map(o,_),y=s.reduce(r,(function(e,t){var n=t.GROUP;return s.isString(n)&&n!==a.Lexer.SKIPPED&&(e[n]=[]),e}),{}),g=s.map(o,(function(e,t){return{pattern:o[t],longerAlt:p[t],canLineTerminator:E[t],isCustom:T[t],short:m[t],group:f[t],push:d[t],pop:h[t],tokenTypeIdx:c[t],tokenType:r[t]}}))}));var v=!0,N=[];return n.safeMode||i("First Char Optimization",(function(){N=s.reduce(r,(function(e,t,r){if("string"==typeof t.PATTERN){var i=x(t.PATTERN.charCodeAt(0));P(e,i,g[r])}else if(s.isArray(t.START_CHARS_HINT)){var o;s.forEach(t.START_CHARS_HINT,(function(t){var n=x("string"==typeof t?t.charCodeAt(0):t);o!==n&&(o=n,P(e,n,g[r]))}))}else if(s.isRegExp(t.PATTERN))if(t.PATTERN.unicode)v=!1,n.ensureOptimizations&&s.PRINT_ERROR(u.failedOptimizationPrefixMsg+"\tUnable to analyze < "+t.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var a=u.getOptimizedStartCodesIndices(t.PATTERN,n.ensureOptimizations);s.isEmpty(a)&&(v=!1),s.forEach(a,(function(t){P(e,t,g[r])}))}else n.ensureOptimizations&&s.PRINT_ERROR(u.failedOptimizationPrefixMsg+"\tTokenType: <"+t.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),v=!1;return e}),[])})),i("ArrayPacking",(function(){N=s.packArray(N)})),{emptyGroups:y,patternIdxToConfig:g,charCodeToPatternIdxToConfig:N,hasCustom:A,canBeOptimized:v}},t.validatePatterns=function(e,t){var n=[],r=f(e);n=n.concat(r.errors);var i=p(r.valid),o=i.valid;return n=(n=(n=(n=(n=n.concat(i.errors)).concat(function(e){var t=[],n=s.filter(e,(function(e){return s.isRegExp(e[l])}));return t=(t=(t=(t=(t=t.concat(h(n))).concat(m(n))).concat(y(n))).concat(g(n))).concat(E(n))}(o))).concat(A(o))).concat(v(o,t))).concat(N(o))},t.findMissingPatterns=f,t.findInvalidPatterns=p;var d=/[^\\][\$]/;function h(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(t,e),t.prototype.visitEndAnchor=function(e){this.found=!0},t}(o.BaseRegExpVisitor),n=s.filter(e,(function(e){var n=e[l];try{var r=c.getRegExpAst(n),i=new t;return i.visit(r),i.found}catch(e){return d.test(n.source)}}));return s.map(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:a.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[e]}}))}function E(e){var t=s.filter(e,(function(e){return e[l].test("")}));return s.map(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:a.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[e]}}))}t.findEndOfInputAnchor=h,t.findEmptyMatchRegExps=E;var T=/[^\\[][\^]|^\^/;function m(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return i(t,e),t.prototype.visitStartAnchor=function(e){this.found=!0},t}(o.BaseRegExpVisitor),n=s.filter(e,(function(e){var n=e[l];try{var r=c.getRegExpAst(n),i=new t;return i.visit(r),i.found}catch(e){return T.test(n.source)}}));return s.map(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:a.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[e]}}))}function y(e){var t=s.filter(e,(function(e){var t=e[l];return t instanceof RegExp&&(t.multiline||t.global)}));return s.map(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:a.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}}))}function g(e){var t=[],n=s.map(e,(function(n){return s.reduce(e,(function(e,r){return n.PATTERN.source!==r.PATTERN.source||s.contains(t,r)||r.PATTERN===a.Lexer.NA||(t.push(r),e.push(r)),e}),[])}));n=s.compact(n);var r=s.filter(n,(function(e){return e.length>1}));return s.map(r,(function(e){var t=s.map(e,(function(e){return e.name}));return{message:"The same RegExp pattern ->"+s.first(e).PATTERN+"<-has been used in all of the following Token Types: "+t.join(", ")+" <-",type:a.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}))}function A(e){var t=s.filter(e,(function(e){if(!s.has(e,"GROUP"))return!1;var t=e.GROUP;return t!==a.Lexer.SKIPPED&&t!==a.Lexer.NA&&!s.isString(t)}));return s.map(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:a.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}}))}function v(e,t){var n=s.filter(e,(function(e){return void 0!==e.PUSH_MODE&&!s.contains(t,e.PUSH_MODE)}));return s.map(n,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist",type:a.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}}))}function N(e){var t=[],n=s.reduce(e,(function(e,t,n){var r,i=t.PATTERN;return i===a.Lexer.NA||(s.isString(i)?e.push({str:i,idx:n,tokenType:t}):s.isRegExp(i)&&(r=i,void 0===s.find([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(function(e){return-1!==r.source.indexOf(e)})))&&e.push({str:i.source,idx:n,tokenType:t})),e}),[]);return s.forEach(e,(function(e,r){s.forEach(n,(function(n){var i=n.str,o=n.idx,u=n.tokenType;if(r<o&&function(e,t){if(s.isRegExp(t)){var n=t.exec(e);return null!==n&&0===n.index}if(s.isFunction(t))return t(e,0,[],{});if(s.has(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}(i,e.PATTERN)){var c="Token: ->"+u.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+e.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";t.push({message:c,type:a.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[e,u]})}}))})),t}function L(e){var t=e.ignoreCase?"i":"";return new RegExp("^(?:"+e.source+")",t)}function O(e){var t=e.ignoreCase?"iy":"y";return new RegExp(""+e.source,t)}function I(e){var t=e.PATTERN;if(s.isRegExp(t))return!1;if(s.isFunction(t))return!0;if(s.has(t,"exec"))return!0;if(s.isString(t))return!1;throw Error("non exhaustive match")}function _(e){return!(!s.isString(e)||1!==e.length)&&e.charCodeAt(0)}function R(e,t){if(s.has(e,"LINE_BREAKS"))return!1;if(s.isRegExp(e.PATTERN)){try{u.canMatchCharCode(t,e.PATTERN)}catch(e){return{issue:a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if(s.isString(e.PATTERN))return!1;if(I(e))return{issue:a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function S(e,t){if(t.issue===a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+e.name+"> Token Type\n\t Root cause: "+t.errMsg+".\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+e.name+"> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function C(e){return s.map(e,(function(e){return s.isString(e)&&e.length>0?e.charCodeAt(0):e}))}function P(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}t.findStartOfInputAnchor=m,t.findUnsupportedFlags=y,t.findDuplicatePatterns=g,t.findInvalidGroupType=A,t.findModesThatDoNotExist=v,t.findUnreachablePatterns=N,t.addStartOfInput=L,t.addStickyFlag=O,t.performRuntimeChecks=function(e,n,r){var i=[];return s.has(e,t.DEFAULT_MODE)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+"> property in its definition\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),s.has(e,t.MODES)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+"> property in its definition\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),s.has(e,t.MODES)&&s.has(e,t.DEFAULT_MODE)&&!s.has(e.modes,e.defaultMode)&&i.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+e.defaultMode+">which does not exist\n",type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),s.has(e,t.MODES)&&s.forEach(e.modes,(function(e,t){s.forEach(e,(function(e,n){s.isUndefined(e)&&i.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+t+"> at index: <"+n+">\n",type:a.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),i},t.performWarningRuntimeChecks=function(e,t,n){var r=[],i=!1,o=s.compact(s.flatten(s.mapValues(e.modes,(function(e){return e})))),c=s.reject(o,(function(e){return e[l]===a.Lexer.NA})),f=C(n);return t&&s.forEach(c,(function(e){var t=R(e,f);if(!1!==t){var n={message:S(e,t),type:t.issue,tokenType:e};r.push(n)}else s.has(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):u.canMatchCharCode(f,e.PATTERN)&&(i=!0)})),t&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:a.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),r},t.cloneEmptyGroups=function(e){var t={},n=s.keys(e);return s.forEach(n,(function(n){var r=e[n];if(!s.isArray(r))throw Error("non exhaustive match");t[n]=[]})),t},t.isCustomPattern=I,t.isShortPattern=_,t.LineTerminatorOptimizedTester={test:function(e){for(var t=e.length,n=this.lastIndex;n<t;n++){var r=e.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===e.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0},t.buildLineBreakIssueMessage=S,t.minOptimizationVal=256;var k=[];function x(e){return e<t.minOptimizationVal?e:k[e]}t.charCodeToOptimizedIndex=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLexerErrorProvider=void 0,t.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,n,r,i){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+", skipped "+n+" characters."}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstForTerminal=t.firstForBranching=t.firstForSequence=t.first=void 0;var r=n(0),i=n(1),o=n(9);function a(e){if(e instanceof i.NonTerminal)return a(e.referencedRule);if(e instanceof i.Terminal)return c(e);if(o.isSequenceProd(e))return s(e);if(o.isBranchingProd(e))return u(e);throw Error("non exhaustive match")}function s(e){for(var t,n=[],i=e.definition,s=0,u=i.length>s,c=!0;u&&c;)t=i[s],c=o.isOptionalProd(t),n=n.concat(a(t)),s+=1,u=i.length>s;return r.uniq(n)}function u(e){var t=r.map(e.definition,(function(e){return a(e)}));return r.uniq(r.flatten(t))}function c(e){return[e.terminalType]}t.first=a,t.firstForSequence=s,t.firstForBranching=u,t.firstForTerminal=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IN=void 0,t.IN="_~IN~_"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.checkPrefixAlternativesAmbiguities=t.validateSomeNonEmptyLookaheadPath=t.validateTooManyAlts=t.RepetionCollector=t.validateAmbiguousAlternationAlternatives=t.validateEmptyOrAlternative=t.getFirstNoneTerminal=t.validateNoLeftRecursion=t.validateRuleIsOverridden=t.validateRuleDoesNotAlreadyExist=t.OccurrenceValidationCollector=t.identifyProductionForDuplicates=t.validateGrammar=void 0;var o=n(0),a=n(0),s=n(2),u=n(9),c=n(11),l=n(12),f=n(1),p=n(5);function d(e){return u.getProductionDslName(e)+"_#_"+e.idx+"_#_"+h(e)}function h(e){return e instanceof f.Terminal?e.terminalType.name:e instanceof f.NonTerminal?e.nonTerminalName:""}t.validateGrammar=function(e,t,n,r,i){var c=o.map(e,(function(e){return function(e,t){var n=new E;e.accept(n);var r=n.allProductions,i=o.groupBy(r,d),a=o.pick(i,(function(e){return e.length>1}));return o.map(o.values(a),(function(n){var r=o.first(n),i=t.buildDuplicateFoundError(e,n),a=u.getProductionDslName(r),c={message:i,type:s.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:r.idx},l=h(r);return l&&(c.parameter=l),c}))}(e,r)})),l=o.map(e,(function(e){return m(e,e,r)})),f=[],p=[],y=[];a.every(l,a.isEmpty)&&(f=a.map(e,(function(e){return A(e,r)})),p=a.map(e,(function(e){return v(e,t,r)})),y=O(e,t,r));var g=function(e,t,n){var r=[],i=a.map(t,(function(e){return e.name}));return a.forEach(e,(function(e){var t=e.name;if(a.contains(i,t)){var o=n.buildNamespaceConflictError(e);r.push({message:o,type:s.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),r}(e,n,r),N=a.map(e,(function(e){return L(e,r)})),I=a.map(e,(function(t){return T(t,e,i,r)}));return o.flatten(c.concat(y,l,f,p,g,N,I))},t.identifyProductionForDuplicates=d;var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(t,e),t.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},t.prototype.visitOption=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t.prototype.visitAlternation=function(e){this.allProductions.push(e)},t.prototype.visitTerminal=function(e){this.allProductions.push(e)},t}(p.GAstVisitor);function T(e,t,n,r){var i=[];if(a.reduce(t,(function(t,n){return n.name===e.name?t+1:t}),0)>1){var o=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});i.push({message:o,type:s.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function m(e,t,n,r){void 0===r&&(r=[]);var i=[],a=y(t.definition);if(o.isEmpty(a))return[];var u=e.name;o.contains(a,e)&&i.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:s.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:u});var c=o.difference(a,r.concat([e])),l=o.map(c,(function(t){var i=o.cloneArr(r);return i.push(t),m(e,t,n,i)}));return i.concat(o.flatten(l))}function y(e){var t=[];if(o.isEmpty(e))return t;var n=o.first(e);if(n instanceof f.NonTerminal)t.push(n.referencedRule);else if(n instanceof f.Alternative||n instanceof f.Option||n instanceof f.RepetitionMandatory||n instanceof f.RepetitionMandatoryWithSeparator||n instanceof f.RepetitionWithSeparator||n instanceof f.Repetition)t=t.concat(y(n.definition));else if(n instanceof f.Alternation)t=o.flatten(o.map(n.definition,(function(e){return y(e.definition)})));else if(!(n instanceof f.Terminal))throw Error("non exhaustive match");var r=u.isOptionalProd(n),i=e.length>1;if(r&&i){var a=o.drop(e);return t.concat(y(a))}return t}t.OccurrenceValidationCollector=E,t.validateRuleDoesNotAlreadyExist=T,t.validateRuleIsOverridden=function(e,t,n){var r,i=[];return o.contains(t,e)||(r="Invalid rule override, rule: ->"+e+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",i.push({message:r,type:s.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e})),i},t.validateNoLeftRecursion=m,t.getFirstNoneTerminal=y;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alternations=[],t}return i(t,e),t.prototype.visitAlternation=function(e){this.alternations.push(e)},t}(p.GAstVisitor);function A(e,t){var n=new g;e.accept(n);var r=n.alternations;return o.reduce(r,(function(n,r){var i=o.dropRight(r.definition),a=o.map(i,(function(n,i){var a=l.nextPossibleTokensAfter([n],[],null,1);return o.isEmpty(a)?{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:i}),type:s.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:i+1}:null}));return n.concat(o.compact(a))}),[])}function v(e,t,n){var r=new g;e.accept(r);var i=r.alternations;return i=a.reject(i,(function(e){return!0===e.ignoreAmbiguities})),o.reduce(i,(function(r,i){var u=i.idx,l=i.maxLookahead||t,f=c.getLookaheadPathsForOr(u,e,l,i),p=function(e,t,n,r){var i=[],u=a.reduce(e,(function(n,r,o){return!0===t.definition[o].ignoreAmbiguities||a.forEach(r,(function(r){var s=[o];a.forEach(e,(function(e,n){o!==n&&c.containsPath(e,r)&&!0!==t.definition[n].ignoreAmbiguities&&s.push(n)})),s.length>1&&!c.containsPath(i,r)&&(i.push(r),n.push({alts:s,path:r}))})),n}),[]);return o.map(u,(function(e){var i=a.map(e.alts,(function(e){return e+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:s.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:[e.alts]}}))}(f,i,e,n),d=I(f,i,e,n);return r.concat(p,d)}),[])}t.validateEmptyOrAlternative=A,t.validateAmbiguousAlternationAlternatives=v;var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return i(t,e),t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t}(p.GAstVisitor);function L(e,t){var n=new g;e.accept(n);var r=n.alternations;return o.reduce(r,(function(n,r){return r.definition.length>255&&n.push({message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:s.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}),n}),[])}function O(e,t,n){var r=[];return a.forEach(e,(function(e){var i=new N;e.accept(i);var o=i.allProductions;a.forEach(o,(function(i){var o=c.getProdType(i),u=i.maxLookahead||t,l=i.idx,f=c.getLookaheadPathsForOptionalProd(l,e,o,u)[0];if(a.isEmpty(a.flatten(f))){var p=n.buildEmptyRepetitionError({topLevelRule:e,repetition:i});r.push({message:p,type:s.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),r}function I(e,t,n,r){var i=[],o=a.reduce(e,(function(e,t,n){var r=a.map(t,(function(e){return{idx:n,path:e}}));return e.concat(r)}),[]);return a.forEach(o,(function(e){if(!0!==t.definition[e.idx].ignoreAmbiguities){var u=e.idx,l=e.path,f=a.findAll(o,(function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<u&&c.isStrictPrefixOfPath(e.path,l)})),p=a.map(f,(function(e){var i=[e.idx+1,u+1],o=0===t.idx?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:s.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}}));i=i.concat(p)}})),i}t.RepetionCollector=N,t.validateTooManyAlts=L,t.validateSomeNonEmptyLookaheadPath=O,t.checkPrefixAlternativesAmbiguities=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptInRepetitionRecovery=t.Recoverable=t.InRuleRecoveryException=t.IN_RULE_RECOVERY_EXCEPTION=t.EOF_FOLLOW_KEY=void 0;var r=n(3),i=n(0),o=n(6),a=n(23),s=n(2);function u(e){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=e}t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",t.InRuleRecoveryException=u,u.prototype=Error.prototype;var c=function(){function e(){}return e.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=i.has(e,"recoveryEnabled")?e.recoveryEnabled:s.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=l)},e.prototype.getTokenToInsert=function(e){var t=r.createTokenInstance(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t},e.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},e.prototype.tryInRepetitionRecovery=function(e,t,n,r){for(var a=this,s=this.findReSyncTokenType(),u=this.exportLexerState(),c=[],l=!1,f=this.LA(1),p=this.LA(1),d=function(){var e=a.LA(0),t=a.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:f,previous:e,ruleName:a.getCurrRuleFullName()}),n=new o.MismatchedTokenException(t,f,a.LA(0));n.resyncedTokens=i.dropRight(c),a.SAVE_ERROR(n)};!l;){if(this.tokenMatcher(p,r))return void d();if(n.call(this))return d(),void e.apply(this,t);this.tokenMatcher(p,s)?l=!0:(p=this.SKIP_TOKEN(),this.addToResyncTokens(p,c))}this.importLexerState(u)},e.prototype.shouldInRepetitionRecoveryBeTried=function(e,t,n){return!1!==n&&(void 0!==e&&void 0!==t&&(!this.tokenMatcher(this.LA(1),e)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))))},e.prototype.getFollowsForInRuleRecovery=function(e,t){var n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)},e.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new u("sad sad panda")},e.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},e.prototype.canRecoverWithSingleTokenInsertion=function(e,t){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if(i.isEmpty(t))return!1;var r=this.LA(1);return void 0!==i.find(t,(function(e){return n.tokenMatcher(r,e)}))},e.prototype.canRecoverWithSingleTokenDeletion=function(e){return this.tokenMatcher(this.LA(2),e)},e.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(t);return i.contains(n,e)},e.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.LA(1),n=2;;){var r=t.tokenType;if(i.contains(e,r))return r;t=this.LA(n),n++}},e.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return t.EOF_FOLLOW_KEY;var e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}},e.prototype.buildFullFollowKeyStack=function(){var e=this,n=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return i.map(n,(function(i,o){return 0===o?t.EOF_FOLLOW_KEY:{ruleName:e.shortRuleNameToFullName(i),idxInCallingRule:r[o],inRule:e.shortRuleNameToFullName(n[o-1])}}))},e.prototype.flattenFollowSet=function(){var e=this,t=i.map(this.buildFullFollowKeyStack(),(function(t){return e.getFollowSetFromFollowKey(t)}));return i.flatten(t)},e.prototype.getFollowSetFromFollowKey=function(e){if(e===t.EOF_FOLLOW_KEY)return[r.EOF];var n=e.ruleName+e.idxInCallingRule+a.IN+e.inRule;return this.resyncFollows[n]},e.prototype.addToResyncTokens=function(e,t){return this.tokenMatcher(e,r.EOF)||t.push(e),t},e.prototype.reSyncTo=function(e){for(var t=[],n=this.LA(1);!1===this.tokenMatcher(n,e);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return i.dropRight(t)},e.prototype.attemptInRepetitionRecovery=function(e,t,n,r,i,o,a){},e.prototype.getCurrentGrammarPath=function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:i.cloneArr(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}},e.prototype.getHumanReadableRuleStack=function(){var e=this;return i.map(this.RULE_STACK,(function(t){return e.shortRuleNameToFullName(t)}))},e}();function l(e,t,n,i,o,a,s){var u=this.getKeyForAutomaticLookahead(i,o),c=this.firstAfterRepMap[u];if(void 0===c){var l=this.getCurrRuleFullName();c=new a(this.getGAstProductions()[l],o).startWalking(),this.firstAfterRepMap[u]=c}var f=c.token,p=c.occurrence,d=c.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===f&&(f=r.EOF,p=1),this.shouldInRepetitionRecoveryBeTried(f,p,s)&&this.tryInRepetitionRecovery(e,t,n,f)}t.Recoverable=c,t.attemptInRepetitionRecovery=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineNameProp=t.functionName=t.classNameFromInstance=void 0;var r=n(0);t.classNameFromInstance=function(e){return i(e.constructor)};function i(e){var t=e.name;return t||"anonymous"}t.functionName=i,t.defineNameProp=function(e,t){var n=Object.getOwnPropertyDescriptor(e,"name");return!(!r.isUndefined(n)&&!n.configurable)&&(Object.defineProperty(e,"name",{enumerable:!1,configurable:!0,writable:!1,value:t}),!0)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryValid=t.parseQuery=void 0;var o=n(17);Object.defineProperty(t,"parseQuery",{enumerable:!0,get:function(){return o.parseQuery}}),Object.defineProperty(t,"isQueryValid",{enumerable:!0,get:function(){return o.isQueryValid}}),i(n(47),t),i(n(48),t),i(n(49),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.SoqlParser=void 0;var o=n(18),a=n(46),s=function(e){function t(t){var n=e.call(this,t.message+" ("+t.line+":"+t.column+")")||this;return n.name="LexingError",n}return i(t,e),t}(Error),u=function(e){function t(t){var n=e.call(this,t.message)||this;return n.name=t.name,n}return i(t,e),t}(Error),c=function(e){function t(){var t=e.call(this,a.allTokens,{skipValidations:!0})||this;return t.$_dateFunctionOr=void 0,t.$_aggregateFunction=void 0,t.$_otherFunction=void 0,t.$_atomicExpression=void 0,t.$_arrayExpression=void 0,t.$_relationalOperator=void 0,t.$_selectClause=void 0,t.$_selectClauseFunctionIdentifier=void 0,t.$_withDataCategoryArr=void 0,t.allowApexBindVariables=!1,t.selectStatement=t.RULE("selectStatement",(function(){t.SUBRULE(t.selectClause),t.SUBRULE(t.fromClause),t.OPTION((function(){t.SUBRULE(t.usingScopeClause)})),t.OPTION1((function(){t.SUBRULE(t.whereClause)})),t.OPTION2((function(){t.MANY({DEF:function(){t.SUBRULE(t.withClause)}})})),t.OPTION3((function(){t.SUBRULE(t.groupByClause),t.OPTION4((function(){t.SUBRULE(t.havingClause)}))})),t.OPTION5((function(){t.SUBRULE(t.orderByClause)})),t.OPTION6((function(){t.SUBRULE(t.limitClause)})),t.OPTION7((function(){t.SUBRULE(t.offsetClause)})),t.OPTION8((function(){t.SUBRULE(t.forViewOrReference)})),t.OPTION9((function(){t.SUBRULE(t.updateTrackingViewstat)}))})),t.selectClause=t.RULE("selectClause",(function(){t.CONSUME(a.Select),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.OR(t.$_selectClause||(t.$_selectClause=[{ALT:function(){return t.SUBRULE(t.selectClauseFunctionIdentifier,{LABEL:"field"})}},{ALT:function(){return t.SUBRULE(t.selectClauseSubqueryIdentifier,{LABEL:"field"})}},{ALT:function(){return t.SUBRULE(t.selectClauseTypeOf,{LABEL:"field"})}},{ALT:function(){return t.SUBRULE(t.selectClauseIdentifier,{LABEL:"field"})}}]))}})})),t.selectClauseFunctionIdentifier=t.RULE("selectClauseFunctionIdentifier",(function(){t.OR(t.$_selectClauseFunctionIdentifier||(t.$_selectClauseFunctionIdentifier=[{ALT:function(){return t.SUBRULE(t.dateFunction,{LABEL:"fn"})}},{ALT:function(){return t.SUBRULE(t.aggregateFunction,{LABEL:"fn",ARGS:[!0]})}},{ALT:function(){return t.SUBRULE(t.locationFunction,{LABEL:"fn"})}},{ALT:function(){return t.SUBRULE(t.fieldsFunction,{LABEL:"fn"})}},{ALT:function(){return t.SUBRULE(t.otherFunction,{LABEL:"fn"})}}])),t.OPTION((function(){return t.CONSUME(a.Identifier,{LABEL:"alias"})}))})),t.selectClauseSubqueryIdentifier=t.RULE("selectClauseSubqueryIdentifier",(function(){t.CONSUME(a.LParen),t.SUBRULE(t.selectStatement),t.CONSUME(a.RParen)})),t.selectClauseTypeOf=t.RULE("selectClauseTypeOf",(function(){t.CONSUME(a.Typeof),t.CONSUME(a.Identifier,{LABEL:"typeOfField"}),t.AT_LEAST_ONE({DEF:function(){t.SUBRULE(t.selectClauseTypeOfThen)}}),t.OPTION((function(){t.SUBRULE(t.selectClauseTypeOfElse)})),t.CONSUME(a.End)})),t.selectClauseIdentifier=t.RULE("selectClauseIdentifier",(function(){t.CONSUME(a.Identifier,{LABEL:"field"}),t.OPTION((function(){return t.CONSUME1(a.Identifier,{LABEL:"alias"})}))})),t.selectClauseTypeOfThen=t.RULE("selectClauseTypeOfThen",(function(){t.CONSUME(a.When),t.CONSUME(a.Identifier,{LABEL:"typeOfField"}),t.CONSUME(a.Then),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.CONSUME1(a.Identifier,{LABEL:"field"})}})})),t.selectClauseTypeOfElse=t.RULE("selectClauseTypeOfElse",(function(){t.CONSUME(a.Else),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.CONSUME(a.Identifier,{LABEL:"field"})}})})),t.fromClause=t.RULE("fromClause",(function(){t.CONSUME(a.From),t.CONSUME(a.Identifier),t.OPTION({GATE:function(){return!(t.LA(1).tokenType===a.Offset&&t.LA(2).tokenType===a.UnsignedInteger)},DEF:function(){return t.CONSUME1(a.Identifier,{LABEL:"alias"})}})})),t.usingScopeClause=t.RULE("usingScopeClause",(function(){t.CONSUME(a.Using),t.CONSUME(a.Scope),t.CONSUME(a.UsingScopeEnumeration)})),t.whereClause=t.RULE("whereClause",(function(){t.CONSUME(a.Where);var e=t.getParenCount();t.AT_LEAST_ONE({DEF:function(){t.SUBRULE(t.conditionExpression,{ARGS:[e,!1,!0,!0]})}}),t.$_checkBalancedParens(e)})),t.whereClauseSubqueryIdentifier=t.RULE("whereClauseSubqueryIdentifier",(function(){t.CONSUME(a.LParen),t.SUBRULE(t.selectStatement),t.CONSUME(a.RParen)})),t.conditionExpression=t.RULE("conditionExpression",(function(e,n,r,i){e=t.getParenCount(e),t.OPTION((function(){t.OR([{ALT:function(){return t.CONSUME(a.And,{LABEL:"logicalOperator"})}},{ALT:function(){return t.CONSUME(a.Or,{LABEL:"logicalOperator"})}}])})),t.MANY({MAX_LOOKAHEAD:10,DEF:function(){return t.SUBRULE(t.expressionPartWithNegation,{ARGS:[e],LABEL:"expressionNegation"})}}),t.OR1({MAX_LOOKAHEAD:10,DEF:[{ALT:function(){return t.SUBRULE(t.expression,{ARGS:[e,n,r,i]})}}]})})),t.withClause=t.RULE("withClause",(function(){t.CONSUME(a.With),t.OR([{ALT:function(){return t.CONSUME(a.SecurityEnforced,{LABEL:"withSecurityEnforced"})}},{ALT:function(){return t.SUBRULE(t.withDataCategory)}}])})),t.withDataCategory=t.RULE("withDataCategory",(function(){t.CONSUME(a.DataCategory),t.AT_LEAST_ONE_SEP({SEP:a.And,DEF:function(){t.SUBRULE(t.withDataCategoryArr)}})})),t.withDataCategoryArr=t.RULE("withDataCategoryArr",(function(){t.CONSUME(a.Identifier,{LABEL:"dataCategoryGroupName"}),t.OR(t.$_withDataCategoryArr||(t.$_withDataCategoryArr=[{ALT:function(){return t.CONSUME(a.At,{LABEL:"filteringSelector"})}},{ALT:function(){return t.CONSUME(a.Above,{LABEL:"filteringSelector"})}},{ALT:function(){return t.CONSUME(a.Below,{LABEL:"filteringSelector"})}},{ALT:function(){return t.CONSUME(a.AboveOrBelow,{LABEL:"filteringSelector"})}}])),t.OPTION((function(){t.CONSUME1(a.LParen)})),t.AT_LEAST_ONE_SEP1({SEP:a.Comma,DEF:function(){t.CONSUME1(a.Identifier,{LABEL:"dataCategoryName"})}}),t.OPTION1((function(){t.CONSUME2(a.RParen)}))})),t.groupByClause=t.RULE("groupByClause",(function(){t.CONSUME(a.GroupBy),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.OR([{ALT:function(){return t.SUBRULE(t.cubeFunction,{LABEL:"groupBy"})}},{ALT:function(){return t.SUBRULE(t.rollupFunction,{LABEL:"groupBy"})}},{ALT:function(){return t.SUBRULE(t.dateFunction,{LABEL:"groupBy"})}},{ALT:function(){return t.CONSUME(a.Identifier,{LABEL:"groupBy"})}}])}})})),t.havingClause=t.RULE("havingClause",(function(){t.CONSUME(a.Having);var e=t.getParenCount();t.AT_LEAST_ONE({DEF:function(){t.SUBRULE(t.conditionExpression,{ARGS:[e,!0]})}}),t.$_checkBalancedParens(e)})),t.orderByClause=t.RULE("orderByClause",(function(){t.CONSUME(a.OrderBy),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.OR([{ALT:function(){return t.SUBRULE(t.orderByGroupingFunctionExpression,{LABEL:"orderByExpressionOrFn"})}},{ALT:function(){return t.SUBRULE(t.orderBySpecialFunctionExpression,{LABEL:"orderByExpressionOrFn"})}},{ALT:function(){return t.SUBRULE(t.orderByExpression,{LABEL:"orderByExpressionOrFn"})}}])}})})),t.orderByExpression=t.RULE("orderByExpression",(function(){t.CONSUME(a.Identifier),t.OPTION((function(){t.OR([{ALT:function(){return t.CONSUME(a.Asc,{LABEL:"order"})}},{ALT:function(){return t.CONSUME(a.Desc,{LABEL:"order"})}}])})),t.OPTION1((function(){t.CONSUME(a.Nulls),t.OR1([{ALT:function(){return t.CONSUME(a.First,{LABEL:"nulls"})}},{ALT:function(){return t.CONSUME(a.Last,{LABEL:"nulls"})}}])}))})),t.orderByGroupingFunctionExpression=t.RULE("orderByGroupingFunctionExpression",(function(){t.CONSUME(a.Grouping,{LABEL:"fn"}),t.SUBRULE(t.functionExpression)})),t.orderBySpecialFunctionExpression=t.RULE("orderBySpecialFunctionExpression",(function(){t.OR([{ALT:function(){return t.SUBRULE(t.aggregateFunction)}},{ALT:function(){return t.SUBRULE(t.dateFunction)}},{ALT:function(){return t.SUBRULE(t.locationFunction)}}]),t.OPTION((function(){t.OR1([{ALT:function(){return t.CONSUME(a.Asc,{LABEL:"order"})}},{ALT:function(){return t.CONSUME(a.Desc,{LABEL:"order"})}}])})),t.OPTION1((function(){t.CONSUME(a.Nulls),t.OR2([{ALT:function(){return t.CONSUME(a.First,{LABEL:"nulls"})}},{ALT:function(){return t.CONSUME(a.Last,{LABEL:"nulls"})}}])}))})),t.limitClause=t.RULE("limitClause",(function(){t.CONSUME(a.Limit),t.CONSUME(a.UnsignedInteger,{LABEL:"value"})})),t.offsetClause=t.RULE("offsetClause",(function(){t.CONSUME(a.Offset),t.CONSUME(a.UnsignedInteger,{LABEL:"value"})})),t.dateFunction=t.RULE("dateFunction",(function(){t.OR(t.$_dateFunctionOr||(t.$_dateFunctionOr=[{ALT:function(){return t.CONSUME(a.CalendarMonth,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.CalendarQuarter,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.CalendarYear,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.DayInMonth,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.DayInWeek,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.DayInYear,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.DayOnly,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.FiscalMonth,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.FiscalQuarter,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.FiscalYear,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.HourInDay,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.WeekInMonth,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.WeekInYear,{LABEL:"fn"})}}])),t.SUBRULE(t.functionExpression)})),t.aggregateFunction=t.RULE("aggregateFunction",(function(){t.OR(t.$_aggregateFunction||(t.$_aggregateFunction=[{ALT:function(){return t.CONSUME(a.Avg,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Count,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.CountDistinct,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Min,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Max,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Sum,{LABEL:"fn"})}}])),t.SUBRULE(t.functionExpression,{ARGS:[!0]})})),t.fieldsFunction=t.RULE("fieldsFunction",(function(){t.CONSUME(a.Fields,{LABEL:"fn"}),t.CONSUME(a.LParen),t.CONSUME(a.FieldsFunctionParamIdentifier,{LABEL:"params"}),t.CONSUME(a.RParen)})),t.otherFunction=t.RULE("otherFunction",(function(){t.OR(t.$_otherFunction||(t.$_otherFunction=[{ALT:function(){return t.CONSUME(a.Format,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Tolabel,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.ConvertTimeZone,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.ConvertCurrency,{LABEL:"fn"})}},{ALT:function(){return t.CONSUME(a.Grouping,{LABEL:"fn"})}}])),t.SUBRULE(t.functionExpression)})),t.cubeFunction=t.RULE("cubeFunction",(function(){t.CONSUME(a.Cube,{LABEL:"fn"}),t.SUBRULE(t.functionExpression)})),t.rollupFunction=t.RULE("rollupFunction",(function(){t.CONSUME(a.Rollup,{LABEL:"fn"}),t.SUBRULE(t.functionExpression)})),t.functionExpression=t.RULE("functionExpression",(function(e){t.CONSUME(a.LParen),t.MANY_SEP({SEP:a.Comma,DEF:function(){t.OR([{GATE:function(){return!e},ALT:function(){return t.SUBRULE(t.aggregateFunction,{LABEL:"params"})}},{ALT:function(){return t.SUBRULE(t.otherFunction,{LABEL:"params"})}},{ALT:function(){return t.CONSUME(a.StringIdentifier,{LABEL:"params"})}},{ALT:function(){return t.CONSUME(a.NumberIdentifier,{LABEL:"params"})}},{ALT:function(){return t.CONSUME(a.Identifier,{LABEL:"params"})}}])}}),t.CONSUME(a.RParen)})),t.locationFunction=t.RULE("locationFunction",(function(){t.CONSUME(a.Distance),t.CONSUME(a.LParen),t.CONSUME(a.Identifier,{LABEL:"location1"}),t.CONSUME(a.Comma),t.OR([{ALT:function(){return t.SUBRULE(t.geolocationFunction,{LABEL:"location2"})}},{ALT:function(){return t.CONSUME1(a.Identifier,{LABEL:"location2"})}}]),t.CONSUME1(a.Comma),t.CONSUME(a.GeolocationUnit,{LABEL:"unit"}),t.CONSUME(a.RParen)})),t.geolocationFunction=t.RULE("geolocationFunction",(function(){t.CONSUME(a.Geolocation),t.CONSUME(a.LParen),t.CONSUME(a.NumberIdentifier,{LABEL:"latitude"}),t.CONSUME(a.Comma),t.CONSUME1(a.NumberIdentifier,{LABEL:"longitude"}),t.CONSUME(a.RParen)})),t.expressionPartWithNegation=t.RULE("expressionPartWithNegation",(function(e){var n=0;t.MANY((function(){t.CONSUME(a.LParen),n++})),t.CONSUME(a.Not,{LABEL:"expressionNegation"}),e&&n&&(e.left+=n)})),t.expression=t.RULE("expression",(function(e,n,r,i){t.OPTION1((function(){t.MANY1((function(){t.CONSUME(a.LParen),e&&e.left++}))})),t.OR1([{GATE:function(){return r},ALT:function(){return t.SUBRULE(t.aggregateFunction,{LABEL:"lhs"})}},{GATE:function(){return i},ALT:function(){return t.SUBRULE(t.locationFunction,{LABEL:"lhs"})}},{ALT:function(){return t.SUBRULE(t.dateFunction,{LABEL:"lhs"})}},{ALT:function(){return t.SUBRULE(t.otherFunction,{LABEL:"lhs"})}},{ALT:function(){return t.CONSUME(a.Identifier,{LABEL:"lhs"})}}]),t.OR2([{ALT:function(){return t.SUBRULE(t.expressionWithRelationalOperator,{LABEL:"operator"})}},{ALT:function(){return t.SUBRULE(t.expressionWithSetOperator,{LABEL:"operator",ARGS:[n]})}}]),t.OPTION3((function(){t.MANY2({GATE:function(){return!e||e.left>e.right},DEF:function(){t.CONSUME(a.RParen),e&&e.right++}})}))})),t.expressionWithRelationalOperator=t.RULE("expressionWithRelationalOperator",(function(){t.SUBRULE(t.relationalOperator),t.SUBRULE(t.atomicExpression,{LABEL:"rhs"})})),t.expressionWithSetOperator=t.RULE("expressionWithSetOperator",(function(e){t.SUBRULE(t.setOperator),t.SUBRULE2(t.atomicExpression,{LABEL:"rhs",ARGS:[!0,e]})})),t.atomicExpression=t.RULE("atomicExpression",(function(e,n){t.OR(t.$_atomicExpression||(t.$_atomicExpression=[{GATE:function(){return t.allowApexBindVariables},ALT:function(){return t.SUBRULE(t.apexBindVariableExpression)}},{GATE:function(){return e},ALT:function(){return t.SUBRULE(t.arrayExpression)}},{GATE:function(){return e&&n},ALT:function(){return t.SUBRULE(t.whereClauseSubqueryIdentifier)}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.DateIdentifier)}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.CurrencyPrefixedDecimal,{LABEL:"CurrencyPrefixedDecimal"})}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.CurrencyPrefixedInteger,{LABEL:"CurrencyPrefixedInteger"})}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.NumberIdentifier)}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.Null)}},{GATE:function(){return!e},ALT:function(){return t.SUBRULE(t.booleanValue)}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.DateLiteral)}},{GATE:function(){return!e},ALT:function(){return t.SUBRULE(t.dateNLiteral)}},{GATE:function(){return!e},ALT:function(){return t.CONSUME(a.StringIdentifier)}}]))})),t.apexBindVariableExpression=t.RULE("apexBindVariableExpression",(function(){t.CONSUME(a.Colon),t.CONSUME(a.Identifier)})),t.arrayExpression=t.RULE("arrayExpression",(function(){t.CONSUME(a.LParen),t.AT_LEAST_ONE_SEP({SEP:a.Comma,DEF:function(){t.OR(t.$_arrayExpression||(t.$_arrayExpression=[{ALT:function(){return t.CONSUME(a.CurrencyPrefixedDecimal,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.CurrencyPrefixedInteger,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.NumberIdentifier,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.DateIdentifier,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.Null,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.True,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.False,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.DateLiteral,{LABEL:"value"})}},{ALT:function(){return t.SUBRULE(t.dateNLiteral,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.StringIdentifier,{LABEL:"value"})}}]))}}),t.CONSUME(a.RParen)})),t.relationalOperator=t.RULE("relationalOperator",(function(){t.OR(t.$_relationalOperator||(t.$_relationalOperator=[{ALT:function(){return t.CONSUME(a.Equal,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.NotEqual,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.GreaterThan,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.GreaterThanOrEqual,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.LessThan,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.LessThanOrEqual,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.Like,{LABEL:"operator"})}}]))})),t.setOperator=t.RULE("setOperator",(function(){t.OR([{ALT:function(){return t.CONSUME(a.In,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.NotIn,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.Includes,{LABEL:"operator"})}},{ALT:function(){return t.CONSUME(a.Excludes,{LABEL:"operator"})}}])})),t.booleanValue=t.RULE("booleanValue",(function(){t.OR([{ALT:function(){return t.CONSUME(a.True,{LABEL:"boolean"})}},{ALT:function(){return t.CONSUME(a.False,{LABEL:"boolean"})}}])})),t.dateNLiteral=t.RULE("dateNLiteral",(function(){t.CONSUME(a.DateNLiteral,{LABEL:"dateNLiteral"}),t.CONSUME(a.Colon),t.OR1([{ALT:function(){return t.CONSUME(a.UnsignedInteger,{LABEL:"variable"})}},{ALT:function(){return t.CONSUME(a.SignedInteger,{LABEL:"variable"})}}])})),t.forViewOrReference=t.RULE("forViewOrReference",(function(){t.CONSUME(a.For),t.OR([{ALT:function(){return t.CONSUME(a.View,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.Reference,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.Update,{LABEL:"value"})}}])})),t.updateTrackingViewstat=t.RULE("updateTrackingViewstat",(function(){t.CONSUME(a.Update),t.OR([{ALT:function(){return t.CONSUME(a.Tracking,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(a.Viewstat,{LABEL:"value"})}}])})),t.performSelfAnalysis(),t}return i(t,e),t.prototype.$_checkBalancedParens=function(e){!this.RECORDING_PHASE&&e&&(0!==e.left-e.right&&this.CONSUME(a.RParenMismatch,{ERR_MSG:"Expecting a token type of --\x3e RParen <-- but found --\x3e '' <--"}))},t.prototype.getParenCount=function(e){return e||{right:0,left:0}},t}(o.CstParser);t.SoqlParser=c;var l=new c;t.parse=function(e,t){t=t||{allowApexBindVariables:!1,logErrors:!1};var n=a.lex(e);if(n.errors.length>0)throw t.logErrors&&(console.log("Lexing Errors:"),console.log(n.errors)),new s(n.errors[0]);l.input=n.tokens,l.allowApexBindVariables=t.allowApexBindVariables||!1;var r=l.selectStatement();if(l.errors.length>0)throw t.logErrors&&(console.log("Parsing Errors:"),console.log(l.errors)),new u(l.errors[0]);return r}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.buildInProdFollowPrefix=t.buildBetweenProdsFollowPrefix=t.computeAllProdsFollows=t.ResyncFollowsWalker=void 0;var o=n(13),a=n(22),s=n(0),u=n(23),c=n(1),l=function(e){function t(t){var n=e.call(this)||this;return n.topProd=t,n.follows={},n}return i(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},t.prototype.walkTerminal=function(e,t,n){},t.prototype.walkProdRef=function(e,t,n){var r=f(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(n),o=new c.Alternative({definition:i}),s=a.first(o);this.follows[r]=s},t}(o.RestWalker);function f(e,t){return e.name+t+u.IN}t.ResyncFollowsWalker=l,t.computeAllProdsFollows=function(e){var t={};return s.forEach(e,(function(e){var n=new l(e).startWalking();s.assign(t,n)})),t},t.buildBetweenProdsFollowPrefix=f,t.buildInProdFollowPrefix=function(e){return e.terminalType.name+e.idx+u.IN}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var o=n(14),a=n(0),s=n(15),u=n(20);function c(e,t,n){switch(e.type){case"Disjunction":for(var r=0;r<e.value.length;r++)c(e.value[r],t,n);break;case"Alternative":var i=e.value;for(r=0;r<i.length;r++){var o=i[r];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var s=o;switch(s.type){case"Character":l(s.value,t,n);break;case"Set":if(!0===s.complement)throw Error("Complement Sets are not supported for first char optimization");a.forEach(s.value,(function(e){if("number"==typeof e)l(e,t,n);else{var r=e;if(!0===n)for(var i=r.from;i<=r.to;i++)l(i,t,n);else{for(i=r.from;i<=r.to&&i<u.minOptimizationVal;i++)l(i,t,n);if(r.to>=u.minOptimizationVal)for(var o=r.from>=u.minOptimizationVal?r.from:u.minOptimizationVal,a=r.to,s=u.charCodeToOptimizedIndex(o),c=u.charCodeToOptimizedIndex(a),f=s;f<=c;f++)t[f]=f}}}));break;case"Group":c(s.value,t,n);break;default:throw Error("Non Exhaustive Match")}var f=void 0!==s.quantifier&&0===s.quantifier.atLeast;if("Group"===s.type&&!1===p(s)||"Group"!==s.type&&!1===f)break}break;default:throw Error("non exhaustive match!")}return a.values(t)}function l(e,t,n){var r=u.charCodeToOptimizedIndex(e);t[r]=r,!0===n&&function(e,t){var n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){var i=u.charCodeToOptimizedIndex(r.charCodeAt(0));t[i]=i}else{var o=n.toLowerCase();if(o!==n){i=u.charCodeToOptimizedIndex(o.charCodeAt(0));t[i]=i}}}(e,t)}function f(e,t){return a.find(e.value,(function(e){if("number"==typeof e)return a.contains(t,e);var n=e;return void 0!==a.find(t,(function(e){return n.from<=e&&e<=n.to}))}))}function p(e){return!(!e.quantifier||0!==e.quantifier.atLeast)||!!e.value&&(a.isArray(e.value)?a.every(e.value,p):p(e.value))}t.failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',t.getOptimizedStartCodesIndices=function(e,n){void 0===n&&(n=!1);try{var r=s.getRegExpAst(e);return c(r.value,{},r.flags.ignoreCase)}catch(r){if("Complement Sets are not supported for first char optimization"===r.message)n&&a.PRINT_WARNING(t.failedOptimizationPrefixMsg+"\tUnable to optimize: < "+e.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var i="";n&&(i="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),a.PRINT_ERROR(t.failedOptimizationPrefixMsg+"\n\tFailed parsing: < "+e.toString()+" >\n\tUsing the regexp-to-ast library version: "+o.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+i)}}return[]},t.firstCharOptimizedIndices=c;var d=function(e){function t(t){var n=e.call(this)||this;return n.targetCharCodes=t,n.found=!1,n}return i(t,e),t.prototype.visitChildren=function(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}e.prototype.visitChildren.call(this,t)}},t.prototype.visitCharacter=function(e){a.contains(this.targetCharCodes,e.value)&&(this.found=!0)},t.prototype.visitSet=function(e){e.complement?void 0===f(e,this.targetCharCodes)&&(this.found=!0):void 0!==f(e,this.targetCharCodes)&&(this.found=!0)},t}(o.BaseRegExpVisitor);t.canMatchCharCode=function(e,t){if(t instanceof RegExp){var n=s.getRegExpAst(t),r=new d(e);return r.visit(n),r.found}return void 0!==a.find(t,(function(t){return a.contains(e,t.charCodeAt(0))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateGrammar=t.resolveGrammar=void 0;var r=n(0),i=n(32),o=n(24),a=n(10);t.resolveGrammar=function(e){e=r.defaults(e,{errMsgProvider:a.defaultGrammarResolverErrorProvider});var t={};return r.forEach(e.rules,(function(e){t[e.name]=e})),i.resolveGrammar(t,e.errMsgProvider)},t.validateGrammar=function(e){return e=r.defaults(e,{errMsgProvider:a.defaultGrammarValidatorErrorProvider}),o.validateGrammar(e.rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GastRefResolverVisitor=t.resolveGrammar=void 0;var o=n(2),a=n(0),s=n(5);t.resolveGrammar=function(e,t){var n=new u(e,t);return n.resolveRefs(),n.errors};var u=function(e){function t(t,n){var r=e.call(this)||this;return r.nameToTopRule=t,r.errMsgProvider=n,r.errors=[],r}return i(t,e),t.prototype.resolveRefs=function(){var e=this;a.forEach(a.values(this.nameToTopRule),(function(t){e.currTopLevel=t,t.accept(e)}))},t.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:o.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},t}(s.GAstVisitor);t.GastRefResolverVisitor=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LooksAhead=void 0;var r=n(11),i=n(0),o=n(2),a=n(16),s=n(9),u=function(){function e(){}return e.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=i.has(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:o.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=i.has(e,"maxLookahead")?e.maxLookahead:o.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=i.isES2015MapSupported()?new Map:[],i.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},e.prototype.preComputeLookaheadFunctions=function(e){var t=this;i.forEach(e,(function(e){t.TRACE_INIT(e.name+" Rule Lookahead",(function(){var n=s.collectMethods(e),o=n.alternation,u=n.repetition,c=n.option,l=n.repetitionMandatory,f=n.repetitionMandatoryWithSeparator,p=n.repetitionWithSeparator;i.forEach(o,(function(n){var i=0===n.idx?"":n.idx;t.TRACE_INIT(""+s.getProductionDslName(n)+i,(function(){var i=r.buildLookaheadFuncForOr(n.idx,e,n.maxLookahead||t.maxLookahead,n.hasPredicates,t.dynamicTokensEnabled,t.lookAheadBuilderForAlternatives),o=a.getKeyForAutomaticLookahead(t.fullRuleNameToShort[e.name],a.OR_IDX,n.idx);t.setLaFuncCache(o,i)}))})),i.forEach(u,(function(n){t.computeLookaheadFunc(e,n.idx,a.MANY_IDX,r.PROD_TYPE.REPETITION,n.maxLookahead,s.getProductionDslName(n))})),i.forEach(c,(function(n){t.computeLookaheadFunc(e,n.idx,a.OPTION_IDX,r.PROD_TYPE.OPTION,n.maxLookahead,s.getProductionDslName(n))})),i.forEach(l,(function(n){t.computeLookaheadFunc(e,n.idx,a.AT_LEAST_ONE_IDX,r.PROD_TYPE.REPETITION_MANDATORY,n.maxLookahead,s.getProductionDslName(n))})),i.forEach(f,(function(n){t.computeLookaheadFunc(e,n.idx,a.AT_LEAST_ONE_SEP_IDX,r.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,s.getProductionDslName(n))})),i.forEach(p,(function(n){t.computeLookaheadFunc(e,n.idx,a.MANY_SEP_IDX,r.PROD_TYPE.REPETITION_WITH_SEPARATOR,n.maxLookahead,s.getProductionDslName(n))}))}))}))},e.prototype.computeLookaheadFunc=function(e,t,n,i,o,s){var u=this;this.TRACE_INIT(""+s+(0===t?"":t),(function(){var s=r.buildLookaheadFuncForOptionalProd(t,e,o||u.maxLookahead,u.dynamicTokensEnabled,i,u.lookAheadBuilderForOptional),c=a.getKeyForAutomaticLookahead(u.fullRuleNameToShort[e.name],n,t);u.setLaFuncCache(c,s)}))},e.prototype.lookAheadBuilderForOptional=function(e,t,n){return r.buildSingleAlternativeLookaheadFunction(e,t,n)},e.prototype.lookAheadBuilderForAlternatives=function(e,t,n,i){return r.buildAlternativesLookAheadFunc(e,t,n,i)},e.prototype.getKeyForAutomaticLookahead=function(e,t){var n=this.getLastExplicitRuleShortName();return a.getKeyForAutomaticLookahead(n,e,t)},e.prototype.getLaFuncFromCache=function(e){},e.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},e.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},e.prototype.setLaFuncCache=function(e,t){},e.prototype.setLaFuncCacheUsingMap=function(e,t){this.lookAheadFuncsCache.set(e,t)},e.prototype.setLaFuncUsingObj=function(e,t){this.lookAheadFuncsCache[e]=t},e}();t.LooksAhead=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeBuilder=void 0;var r=n(35),i=n(0),o=n(36),a=n(2),s=function(){function e(){}return e.prototype.initTreeBuilder=function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=i.has(e,"nodeLocationTracking")?e.nodeLocationTracking:a.DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=r.setNodeLocationFull,this.setNodeLocationFromNode=r.setNodeLocationFull,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=r.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=r.setNodeLocationOnlyOffset,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"');this.setNodeLocationFromToken=i.NOOP,this.setNodeLocationFromNode=i.NOOP,this.cstPostRule=i.NOOP,this.setInitialNodeLocation=i.NOOP}else this.cstInvocationStateUpdate=i.NOOP,this.cstFinallyStateUpdate=i.NOOP,this.cstPostTerminal=i.NOOP,this.cstPostNonTerminal=i.NOOP,this.cstPostRule=i.NOOP},e.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},e.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},e.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.setInitialNodeLocationFullRegular=function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.cstInvocationStateUpdate=function(e,t){var n={name:e,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},e.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},e.prototype.cstPostRuleFull=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},e.prototype.cstPostRuleOnlyOffset=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?n.endOffset=t.endOffset:n.startOffset=NaN},e.prototype.cstPostTerminal=function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];r.addTerminalToCst(n,t,e),this.setNodeLocationFromToken(n.location,t)},e.prototype.cstPostNonTerminal=function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];r.addNoneTerminalToCst(n,t,e),this.setNodeLocationFromNode(n.location,e.location)},e.prototype.getBaseCstVisitorConstructor=function(){if(i.isUndefined(this.baseCstVisitorConstructor)){var e=o.createBaseSemanticVisitorConstructor(this.className,i.keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},e.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(i.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var e=o.createBaseVisitorConstructorWithDefaults(this.className,i.keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},e.prototype.getLastExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-1]},e.prototype.getPreviousExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-2]},e.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},e}();t.TreeBuilder=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNoneTerminalToCst=t.addTerminalToCst=t.setNodeLocationFull=t.setNodeLocationOnlyOffset=void 0,t.setNodeLocationOnlyOffset=function(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)},t.setNodeLocationFull=function(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)},t.addTerminalToCst=function(e,t,n){void 0===e.children[n]?e.children[n]=[t]:e.children[n].push(t)},t.addNoneTerminalToCst=function(e,t,n){void 0===e.children[t]?e.children[t]=[n]:e.children[t].push(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRedundantMethods=t.validateMissingCstMethods=t.validateVisitor=t.CstVisitorDefinitionError=t.createBaseVisitorConstructorWithDefaults=t.createBaseSemanticVisitorConstructor=t.defaultVisit=void 0;var r,i=n(0),o=n(26);function a(e,t){for(var n=i.keys(e),r=n.length,o=0;o<r;o++)for(var a=e[n[o]],s=a.length,u=0;u<s;u++){var c=a[u];void 0===c.tokenTypeIdx&&this[c.name](c.children,t)}}function s(e,t){var n=u(e,t),r=l(e,t);return n.concat(r)}function u(e,t){var n=i.map(t,(function(t){if(!i.isFunction(e[t]))return{msg:"Missing visitor method: <"+t+"> on "+o.functionName(e.constructor)+" CST Visitor.",type:r.MISSING_METHOD,methodName:t}}));return i.compact(n)}t.defaultVisit=a,t.createBaseSemanticVisitorConstructor=function(e,t){var n=function(){};return o.defineNameProp(n,e+"BaseSemantics"),(n.prototype={visit:function(e,t){if(i.isArray(e)&&(e=e[0]),!i.isUndefined(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=s(this,t);if(!i.isEmpty(e)){var n=i.map(e,(function(e){return e.msg}));throw Error("Errors Detected in CST Visitor <"+o.functionName(this.constructor)+">:\n\t"+n.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=n,n._RULE_NAMES=t,n},t.createBaseVisitorConstructorWithDefaults=function(e,t,n){var r=function(){};o.defineNameProp(r,e+"BaseSemanticsWithDefaults");var s=Object.create(n.prototype);return i.forEach(t,(function(e){s[e]=a})),(r.prototype=s).constructor=r,r},function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(r=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={})),t.validateVisitor=s,t.validateMissingCstMethods=u;var c=["constructor","visit","validateVisitor"];function l(e,t){var n=[];for(var a in e)!i.isFunction(e[a])||i.contains(c,a)||i.contains(t,a)||n.push({msg:"Redundant visitor method: <"+a+"> on "+o.functionName(e.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:r.REDUNDANT_METHOD,methodName:a});return n}t.validateRedundantMethods=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexerAdapter=void 0;var r=n(2),i=function(){function e(){}return e.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(e.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!1,configurable:!0}),e.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):r.END_OF_FILE},e.prototype.LA=function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?r.END_OF_FILE:this.tokVector[t]},e.prototype.consumeToken=function(){this.currIdx++},e.prototype.exportLexerState=function(){return this.currIdx},e.prototype.importLexerState=function(e){this.currIdx=e},e.prototype.resetLexerState=function(){this.currIdx=-1},e.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},e.prototype.getLexerPosition=function(){return this.exportLexerState()},e}();t.LexerAdapter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerApi=void 0;var r=n(0),i=n(6),o=n(2),a=n(10),s=n(24),u=n(1),c=function(){function e(){}return e.prototype.ACTION=function(e){return e.call(this)},e.prototype.consume=function(e,t,n){return this.consumeInternal(t,e,n)},e.prototype.subrule=function(e,t,n){return this.subruleInternal(t,e,n)},e.prototype.option=function(e,t){return this.optionInternal(t,e)},e.prototype.or=function(e,t){return this.orInternal(t,e)},e.prototype.many=function(e,t){return this.manyInternal(e,t)},e.prototype.atLeastOne=function(e,t){return this.atLeastOneInternal(e,t)},e.prototype.CONSUME=function(e,t){return this.consumeInternal(e,0,t)},e.prototype.CONSUME1=function(e,t){return this.consumeInternal(e,1,t)},e.prototype.CONSUME2=function(e,t){return this.consumeInternal(e,2,t)},e.prototype.CONSUME3=function(e,t){return this.consumeInternal(e,3,t)},e.prototype.CONSUME4=function(e,t){return this.consumeInternal(e,4,t)},e.prototype.CONSUME5=function(e,t){return this.consumeInternal(e,5,t)},e.prototype.CONSUME6=function(e,t){return this.consumeInternal(e,6,t)},e.prototype.CONSUME7=function(e,t){return this.consumeInternal(e,7,t)},e.prototype.CONSUME8=function(e,t){return this.consumeInternal(e,8,t)},e.prototype.CONSUME9=function(e,t){return this.consumeInternal(e,9,t)},e.prototype.SUBRULE=function(e,t){return this.subruleInternal(e,0,t)},e.prototype.SUBRULE1=function(e,t){return this.subruleInternal(e,1,t)},e.prototype.SUBRULE2=function(e,t){return this.subruleInternal(e,2,t)},e.prototype.SUBRULE3=function(e,t){return this.subruleInternal(e,3,t)},e.prototype.SUBRULE4=function(e,t){return this.subruleInternal(e,4,t)},e.prototype.SUBRULE5=function(e,t){return this.subruleInternal(e,5,t)},e.prototype.SUBRULE6=function(e,t){return this.subruleInternal(e,6,t)},e.prototype.SUBRULE7=function(e,t){return this.subruleInternal(e,7,t)},e.prototype.SUBRULE8=function(e,t){return this.subruleInternal(e,8,t)},e.prototype.SUBRULE9=function(e,t){return this.subruleInternal(e,9,t)},e.prototype.OPTION=function(e){return this.optionInternal(e,0)},e.prototype.OPTION1=function(e){return this.optionInternal(e,1)},e.prototype.OPTION2=function(e){return this.optionInternal(e,2)},e.prototype.OPTION3=function(e){return this.optionInternal(e,3)},e.prototype.OPTION4=function(e){return this.optionInternal(e,4)},e.prototype.OPTION5=function(e){return this.optionInternal(e,5)},e.prototype.OPTION6=function(e){return this.optionInternal(e,6)},e.prototype.OPTION7=function(e){return this.optionInternal(e,7)},e.prototype.OPTION8=function(e){return this.optionInternal(e,8)},e.prototype.OPTION9=function(e){return this.optionInternal(e,9)},e.prototype.OR=function(e){return this.orInternal(e,0)},e.prototype.OR1=function(e){return this.orInternal(e,1)},e.prototype.OR2=function(e){return this.orInternal(e,2)},e.prototype.OR3=function(e){return this.orInternal(e,3)},e.prototype.OR4=function(e){return this.orInternal(e,4)},e.prototype.OR5=function(e){return this.orInternal(e,5)},e.prototype.OR6=function(e){return this.orInternal(e,6)},e.prototype.OR7=function(e){return this.orInternal(e,7)},e.prototype.OR8=function(e){return this.orInternal(e,8)},e.prototype.OR9=function(e){return this.orInternal(e,9)},e.prototype.MANY=function(e){this.manyInternal(0,e)},e.prototype.MANY1=function(e){this.manyInternal(1,e)},e.prototype.MANY2=function(e){this.manyInternal(2,e)},e.prototype.MANY3=function(e){this.manyInternal(3,e)},e.prototype.MANY4=function(e){this.manyInternal(4,e)},e.prototype.MANY5=function(e){this.manyInternal(5,e)},e.prototype.MANY6=function(e){this.manyInternal(6,e)},e.prototype.MANY7=function(e){this.manyInternal(7,e)},e.prototype.MANY8=function(e){this.manyInternal(8,e)},e.prototype.MANY9=function(e){this.manyInternal(9,e)},e.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},e.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},e.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},e.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},e.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},e.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},e.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},e.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},e.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},e.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},e.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},e.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},e.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},e.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},e.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},e.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},e.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},e.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},e.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},e.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},e.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},e.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},e.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},e.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},e.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},e.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},e.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},e.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},e.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},e.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},e.prototype.RULE=function(e,t,n){if(void 0===n&&(n=o.DEFAULT_RULE_CONFIG),r.contains(this.definedRulesNames,e)){var i={message:a.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:o.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(i)}this.definedRulesNames.push(e);var s=this.defineRule(e,t,n);return this[e]=s,s},e.prototype.OVERRIDE_RULE=function(e,t,n){void 0===n&&(n=o.DEFAULT_RULE_CONFIG);var r=[];r=r.concat(s.validateRuleIsOverridden(e,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(r);var i=this.defineRule(e,t,n);return this[e]=i,i},e.prototype.BACKTRACK=function(e,t){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if(i.isRecognitionException(e))return!1;throw e}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},e.prototype.getGAstProductions=function(){return this.gastProductionsCache},e.prototype.getSerializedGastProductions=function(){return u.serializeGrammar(r.values(this.gastProductionsCache))},e}();t.RecognizerApi=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerEngine=void 0;var r=n(0),i=n(16),o=n(6),a=n(11),s=n(12),u=n(2),c=n(25),l=n(3),f=n(4),p=n(26),d=function(){function e(){}return e.prototype.initRecognizerEngine=function(e,t){if(this.className=p.classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=f.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},r.has(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(r.isArray(e)){if(r.isEmpty(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(r.isArray(e))this.tokensMap=r.reduce(e,(function(e,t){return e[t.name]=t,e}),{});else if(r.has(e,"modes")&&r.every(r.flatten(r.values(e.modes)),f.isTokenType)){var n=r.flatten(r.values(e.modes)),i=r.uniq(n);this.tokensMap=r.reduce(i,(function(e,t){return e[t.name]=t,e}),{})}else{if(!r.isObject(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=r.cloneObj(e)}this.tokensMap.EOF=l.EOF;var o=r.every(r.values(e),(function(e){return r.isEmpty(e.categoryMatches)}));this.tokenMatcher=o?f.tokenStructuredMatcherNoCategories:f.tokenStructuredMatcher,f.augmentTokenTypes(r.values(this.tokensMap))},e.prototype.defineRule=function(e,t,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var o=r.has(n,"resyncEnabled")?n.resyncEnabled:u.DEFAULT_RULE_CONFIG.resyncEnabled,a=r.has(n,"recoveryValueFunc")?n.recoveryValueFunc:u.DEFAULT_RULE_CONFIG.recoveryValueFunc,s=this.ruleShortNameIdx<<i.BITS_FOR_METHOD_TYPE+i.BITS_FOR_OCCURRENCE_IDX;function c(e){try{if(!0===this.outputCst){t.apply(this,e);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return t.apply(this,e)}catch(e){return this.invokeRuleCatch(e,o,a)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;var l=function(t,n){return void 0===t&&(t=0),this.ruleInvocationStateUpdate(s,e,t),c.call(this,n)};return l.ruleName=e,l.originalGrammarAction=t,l},e.prototype.invokeRuleCatch=function(e,t,n){var r=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(o.isRecognitionException(e)){var a=e;if(i){var s,u=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(u))return a.resyncedTokens=this.reSyncTo(u),this.outputCst?((s=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,s):n();throw this.outputCst&&((s=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a.partialCstResult=s),a}if(r)return this.moveToTerminatedState(),n();throw a}throw e},e.prototype.optionInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.OPTION_IDX,t);return this.optionInternalLogic(e,t,n)},e.prototype.optionInternalLogic=function(e,t,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=e;if(!0===a.call(this))return r.call(this)},e.prototype.atLeastOneInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_IDX,e);return this.atLeastOneInternalLogic(e,t,n)},e.prototype.atLeastOneInternalLogic=function(e,t,n){var r,o,u=this,c=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(o=t.GATE)){var l=c;c=function(){return o.call(u)&&l.call(u)}}}else r=t;if(!0!==c.call(this))throw this.raiseEarlyExitException(e,a.PROD_TYPE.REPETITION_MANDATORY,t.ERR_MSG);for(var f=this.doSingleRepetition(r);!0===c.call(this)&&!0===f;)f=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],c,i.AT_LEAST_ONE_IDX,e,s.NextTerminalAfterAtLeastOneWalker)},e.prototype.atLeastOneSepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_SEP_IDX,e);this.atLeastOneSepFirstInternalLogic(e,t,n)},e.prototype.atLeastOneSepFirstInternalLogic=function(e,t,n){var r=this,o=t.DEF,u=t.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(e,a.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);o.call(this);for(var c=function(){return r.tokenMatcher(r.LA(1),u)};!0===this.tokenMatcher(this.LA(1),u);)this.CONSUME(u),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,u,c,o,s.NextTerminalAfterAtLeastOneSepWalker],c,i.AT_LEAST_ONE_SEP_IDX,e,s.NextTerminalAfterAtLeastOneSepWalker)},e.prototype.manyInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.MANY_IDX,e);return this.manyInternalLogic(e,t,n)},e.prototype.manyInternalLogic=function(e,t,n){var r,o,a=this,u=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(o=t.GATE)){var c=u;u=function(){return o.call(a)&&c.call(a)}}}else r=t;for(var l=!0;!0===u.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],u,i.MANY_IDX,e,s.NextTerminalAfterManyWalker,l)},e.prototype.manySepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.MANY_SEP_IDX,e);this.manySepFirstInternalLogic(e,t,n)},e.prototype.manySepFirstInternalLogic=function(e,t,n){var r=this,o=t.DEF,a=t.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){o.call(this);for(var u=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,u,o,s.NextTerminalAfterManySepWalker],u,i.MANY_SEP_IDX,e,s.NextTerminalAfterManySepWalker)}},e.prototype.repetitionSepSecondInternal=function(e,t,n,r,o){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,o],n,i.AT_LEAST_ONE_SEP_IDX,e,o)},e.prototype.doSingleRepetition=function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t},e.prototype.orInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(i.OR_IDX,t),o=r.isArray(e)?e:e.DEF,a=this.getLaFuncFromCache(n).call(this,o);if(void 0!==a)return o[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)},e.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new o.NotAllInputParsedException(t,e))}},e.prototype.subruleInternal=function(e,t,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return r=e.call(this,t,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:e.ruleName),r}catch(t){this.subruleInternalError(t,n,e.ruleName)}},e.prototype.subruleInternalError=function(e,t,n){throw o.isRecognitionException(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:n),delete e.partialCstResult),e},e.prototype.consumeInternal=function(e,t,n){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),r=i):this.consumeInternalError(e,i,n)}catch(n){r=this.consumeInternalRecovery(e,t,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:e.name,r),r},e.prototype.consumeInternalError=function(e,t,n){var r,i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new o.MismatchedTokenException(r,t,i))},e.prototype.consumeInternalRecovery=function(e,t,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(e){throw e.name===c.IN_RULE_RECOVERY_EXCEPTION?n:e}},e.prototype.saveRecogState=function(){var e=this.errors,t=r.cloneArr(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}},e.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},e.prototype.ruleInvocationStateUpdate=function(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t,e)},e.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},e.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},e.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},e.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),l.EOF)},e.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},e}();t.RecognizerEngine=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;var r=n(6),i=n(0),o=n(11),a=n(2),s=function(){function e(){}return e.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=i.has(e,"errorMessageProvider")?e.errorMessageProvider:a.DEFAULT_PARSER_CONFIG.errorMessageProvider},e.prototype.SAVE_ERROR=function(e){if(r.isRecognitionException(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:i.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(e.prototype,"errors",{get:function(){return i.cloneArr(this._errors)},set:function(e){this._errors=e},enumerable:!1,configurable:!0}),e.prototype.raiseEarlyExitException=function(e,t,n){for(var i=this.getCurrRuleFullName(),a=this.getGAstProductions()[i],s=o.getLookaheadPathsForOptionalProd(e,a,t,this.maxLookahead)[0],u=[],c=1;c<=this.maxLookahead;c++)u.push(this.LA(c));var l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:s,actual:u,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new r.EarlyExitException(l,this.LA(1),this.LA(0)))},e.prototype.raiseNoAltException=function(e,t){for(var n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],a=o.getLookaheadPathsForOr(e,i,this.maxLookahead),s=[],u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));var c=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:a,actual:s,previous:c,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new r.NoViableAltException(l,this.LA(1),c))},e}();t.ErrorHandler=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAssist=void 0;var r=n(12),i=n(0),o=function(){function e(){}return e.prototype.initContentAssist=function(){},e.prototype.computeContentAssist=function(e,t){var n=this.gastProductionsCache[e];if(i.isUndefined(n))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return r.nextPossibleTokensAfter([n],t,this.tokenMatcher,this.maxLookahead)},e.prototype.getNextPossibleTokenTypes=function(e){var t=i.first(e.ruleStack),n=this.getGAstProductions()[t];return new r.NextAfterTokenWalker(n,e).startWalking()},e}();t.ContentAssist=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GastRecorder=void 0;var r=n(0),i=n(1),o=n(8),a=n(4),s=n(3),u=n(2),c=n(16),l={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(l);var f=Math.pow(2,c.BITS_FOR_OCCURRENCE_IDX)-1,p=s.createToken({name:"RECORDING_PHASE_TOKEN",pattern:o.Lexer.NA});a.augmentTokenTypes([p]);var d=s.createTokenInstance(p,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(d);var h={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},E=function(){function e(){}return e.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},e.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var t=function(t){var n=t>0?t:"";e["CONSUME"+n]=function(e,n){return this.consumeInternalRecord(e,t,n)},e["SUBRULE"+n]=function(e,n){return this.subruleInternalRecord(e,t,n)},e["OPTION"+n]=function(e){return this.optionInternalRecord(e,t)},e["OR"+n]=function(e){return this.orInternalRecord(e,t)},e["MANY"+n]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP"+n]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE"+n]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP"+n]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},n=0;n<10;n++)t(n);e.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},e.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD}))},e.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var t=0;t<10;t++){var n=t>0?t:"";delete e["CONSUME"+n],delete e["SUBRULE"+n],delete e["OPTION"+n],delete e["OR"+n],delete e["MANY"+n],delete e["MANY_SEP"+n],delete e["AT_LEAST_ONE"+n],delete e["AT_LEAST_ONE_SEP"+n]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))},e.prototype.ACTION_RECORD=function(e){},e.prototype.BACKTRACK_RECORD=function(e,t){return function(){return!0}},e.prototype.LA_RECORD=function(e){return u.END_OF_FILE},e.prototype.topLevelRuleRecord=function(e,t){try{var n=new i.Rule({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(t){throw e}throw e}},e.prototype.optionInternalRecord=function(e,t){return T.call(this,i.Option,e,t)},e.prototype.atLeastOneInternalRecord=function(e,t){T.call(this,i.RepetitionMandatory,t,e)},e.prototype.atLeastOneSepFirstInternalRecord=function(e,t){T.call(this,i.RepetitionMandatoryWithSeparator,t,e,!0)},e.prototype.manyInternalRecord=function(e,t){T.call(this,i.Repetition,t,e)},e.prototype.manySepFirstInternalRecord=function(e,t){T.call(this,i.RepetitionWithSeparator,t,e,!0)},e.prototype.orInternalRecord=function(e,t){return m.call(this,e,t)},e.prototype.subruleInternalRecord=function(e,t,n){if(g(t),!e||!1===r.has(e,"ruleName")){var o=new Error("<SUBRULE"+y(t)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw o.KNOWN_RECORDER_ERROR=!0,o}var a=r.peek(this.recordingProdStack),s=e.ruleName,u=new i.NonTerminal({idx:t,nonTerminalName:s,referencedRule:void 0});return a.definition.push(u),this.outputCst?h:l},e.prototype.consumeInternalRecord=function(e,t,n){if(g(t),!a.hasShortKeyProperty(e)){var o=new Error("<CONSUME"+y(t)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw o.KNOWN_RECORDER_ERROR=!0,o}var s=r.peek(this.recordingProdStack),u=new i.Terminal({idx:t,terminalType:e});return s.definition.push(u),d},e}();function T(e,t,n,i){void 0===i&&(i=!1),g(n);var o=r.peek(this.recordingProdStack),a=r.isFunction(t)?t:t.DEF,s=new e({definition:[],idx:n});return i&&(s.separator=t.SEP),r.has(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),o.definition.push(s),this.recordingProdStack.pop(),l}function m(e,t){var n=this;g(t);var o=r.peek(this.recordingProdStack),a=!1===r.isArray(e),s=!1===a?e:e.DEF,u=new i.Alternation({definition:[],idx:t,ignoreAmbiguities:a&&!0===e.IGNORE_AMBIGUITIES});r.has(e,"MAX_LOOKAHEAD")&&(u.maxLookahead=e.MAX_LOOKAHEAD);var c=r.some(s,(function(e){return r.isFunction(e.GATE)}));return u.hasPredicates=c,o.definition.push(u),r.forEach(s,(function(e){var t=new i.Alternative({definition:[]});u.definition.push(t),r.has(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:r.has(e,"GATE")&&(t.ignoreAmbiguities=!0),n.recordingProdStack.push(t),e.ALT.call(n),n.recordingProdStack.pop()})),l}function y(e){return 0===e?"":""+e}function g(e){if(e<0||e>f){var t=new Error("Invalid DSL Method idx value: <"+e+">\n\tIdx value must be a none negative value smaller than "+(f+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}t.GastRecorder=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTracer=void 0;var r=n(0),i=n(2),o=function(){function e(){}return e.prototype.initPerformanceTracer=function(e){if(r.has(e,"traceInitPerf")){var t=e.traceInitPerf,n="number"==typeof t;this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=i.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var i=r.timer(t),o=i.time,a=i.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+e+"> time: "+o+"ms"),this.traceInitIndent--,a}return t()},e}();t.PerformanceTracer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=function(e,t){t.forEach((function(t){var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(r){if("constructor"!==r){var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(e.prototype,r,i):e.prototype[r]=t.prototype[r]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSyntaxDiagramsCode=void 0;var r=n(19);t.createSyntaxDiagramsCode=function(e,t){var n=void 0===t?{}:t,i=n.resourceBase,o=void 0===i?"https://unpkg.com/chevrotain@"+r.VERSION+"/diagrams/":i,a=n.css;return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+("\n<link rel='stylesheet' href='"+(void 0===a?"https://unpkg.com/chevrotain@"+r.VERSION+"/diagrams/diagrams.css":a)+"'>\n")+("\n<script src='"+o+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+o+"src/diagrams_builder.js'><\/script>\n<script src='"+o+"src/diagrams_behavior.js'><\/script>\n<script src='"+o+"src/main.js'><\/script>\n")+'\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(e,null,"  ")+";\n<\/script>\n")+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Using=t.True=t.Select=t.Rollup=t.Or=t.Nulls=t.Null=t.Not=t.Limit=t.Like=t.Last=t.Includes=t.NotIn=t.In=t.Having=t.GroupBy=t.From=t.First=t.False=t.Excludes=t.Else=t.Cube=t.OrderBy=t.Asc=t.Desc=t.As=t.And=t.WhiteSpace=t.StringIdentifier=t.Identifier=t.RParenMismatch=t.UsingScopeEnumeration=t.IdentifierNotKeyword=t.IntegerNumberIdentifier=t.DecimalNumberIdentifier=t.NumberIdentifier=t.DateIdentifier=t.SymbolIdentifier=t.RelationalOperator=t.DateNLiteral=t.DateLiteralNotIdentifier=t.DateLiteral=t.OtherFunction=t.FieldsFunctionParamIdentifier=t.FieldsFunction=t.LocationFunction=t.AggregateFunction=t.DateFunction=t.Keyword=t.ReservedKeyword=void 0,t.Standard=t.Custom=t.All=t.Grouping=t.ConvertCurrency=t.ConvertTimeZone=t.Tolabel=t.Format=t.Fields=t.Geolocation=t.Distance=t.Sum=t.Max=t.Min=t.CountDistinct=t.Count=t.Avg=t.WeekInYear=t.WeekInMonth=t.HourInDay=t.FiscalYear=t.FiscalQuarter=t.FiscalMonth=t.DayOnly=t.DayInYear=t.DayInWeek=t.DayInMonth=t.CalendarYear=t.CalendarQuarter=t.CalendarMonth=t.SecurityEnforced=t.When=t.Viewstat=t.View=t.Typeof=t.Then=t.Tracking=t.Scope=t.Reference=t.Offset=t.End=t.DataCategory=t.Below=t.At=t.AboveOrBelow=t.Above=t.Update=t.For=t.With=t.Where=void 0,t.GreaterThanOrEqual=t.GreaterThan=t.LessThanOrEqual=t.LessThan=t.NotEqual=t.Equal=t.NFiscalYearsAgo=t.LastNFiscalYears=t.NextNFiscalYears=t.NFiscalQuartersAgo=t.LastNFiscalQuarters=t.NextNFiscalQuarters=t.NYearsAgo=t.LastNYears=t.NextNYears=t.NQuartersAgo=t.LastNQuarters=t.NextNQuarters=t.NMonthsAgo=t.LastNMonths=t.NextNMonths=t.NWeeksAgo=t.LastNWeeks=t.NextNWeeks=t.NDaysAgo=t.LastNDays=t.NextNDays=t.NextFiscalYear=t.LastFiscalYear=t.ThisFiscalYear=t.NextFiscalQuarter=t.LastFiscalQuarter=t.ThisFiscalQuarter=t.NextYear=t.LastYear=t.ThisYear=t.NextQuarter=t.LastQuarter=t.ThisQuarter=t.Next90_days=t.Last90_days=t.NextMonth=t.ThisMonth=t.LastMonth=t.NextWeek=t.ThisWeek=t.LastWeek=t.Tomorrow=t.Today=t.Yesterday=void 0,t.lex=t.allTokens=t.AllPrivate=t.Team=t.MyTeamTerritory=t.MyTerritory=t.Mine=t.MineAndMyGroups=t.Everything=t.Delegated=t.UnsignedInteger=t.GeolocationUnit=t.SignedInteger=t.CurrencyPrefixedInteger=t.UnsignedDecimal=t.SignedDecimal=t.CurrencyPrefixedDecimal=t.DateToken=t.DateTime=t.Minus=t.Plus=t.RParen=t.LParen=t.Asterisk=t.Comma=t.Semicolon=t.Colon=t.Decimal=void 0;var r=n(18);t.ReservedKeyword=r.createToken({name:"KeywordReserved",pattern:r.Lexer.NA}),t.Keyword=r.createToken({name:"Keyword",pattern:r.Lexer.NA}),t.DateFunction=r.createToken({name:"DateFunction",pattern:r.Lexer.NA}),t.AggregateFunction=r.createToken({name:"AggregateFunction",pattern:r.Lexer.NA}),t.LocationFunction=r.createToken({name:"LocationFunction",pattern:r.Lexer.NA}),t.FieldsFunction=r.createToken({name:"FieldsFunction",pattern:r.Lexer.NA}),t.FieldsFunctionParamIdentifier=r.createToken({name:"FieldsFunctionParamIdentifier",pattern:r.Lexer.NA}),t.OtherFunction=r.createToken({name:"OtherFunction",pattern:r.Lexer.NA}),t.DateLiteral=r.createToken({name:"DateLiteral",pattern:r.Lexer.NA}),t.DateLiteralNotIdentifier=r.createToken({name:"DateLiteralNotIdentifier",pattern:r.Lexer.NA}),t.DateNLiteral=r.createToken({name:"DateNLiteral",pattern:r.Lexer.NA}),t.RelationalOperator=r.createToken({name:"RelationalOperator",pattern:r.Lexer.NA}),t.SymbolIdentifier=r.createToken({name:"SymbolIdentifier",pattern:r.Lexer.NA}),t.DateIdentifier=r.createToken({name:"DateIdentifier",pattern:r.Lexer.NA}),t.NumberIdentifier=r.createToken({name:"NumberIdentifier",pattern:r.Lexer.NA}),t.DecimalNumberIdentifier=r.createToken({name:"DecimalNumberIdentifier",pattern:r.Lexer.NA}),t.IntegerNumberIdentifier=r.createToken({name:"IntegerNumberIdentifier",pattern:r.Lexer.NA}),t.IdentifierNotKeyword=r.createToken({name:"IdentifierNotKeyword",pattern:r.Lexer.NA}),t.UsingScopeEnumeration=r.createToken({name:"UsingScopeEnumeration",pattern:r.Lexer.NA}),t.RParenMismatch=r.createToken({name:"RParenMismatch",pattern:r.Lexer.NA});var i=/[a-zA-Z][a-zA-Z0-9_.]*/y;t.Identifier=r.createToken({name:"Identifier",pattern:function(e,t){i.lastIndex=t;var n=i.exec(e);return n&&n[0].includes("..")?null:n},line_breaks:!1,categories:[t.IdentifierNotKeyword],start_chars_hint:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}),t.StringIdentifier=r.createToken({name:"StringIdentifier",line_breaks:!0,pattern:/(')(?:(?=(\\?))\2.)*?\1/}),t.WhiteSpace=r.createToken({name:"WhiteSpace",pattern:/\s+/,group:r.Lexer.SKIPPED}),t.And=r.createToken({name:"AND",pattern:/AND/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.As=r.createToken({name:"AS",pattern:/AS/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Desc=r.createToken({name:"DESC",pattern:/DESC/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Asc=r.createToken({name:"ASC",pattern:/ASC/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.OrderBy=r.createToken({name:"ORDER_BY",pattern:/ORDER BY/i,longer_alt:t.Identifier}),t.Cube=r.createToken({name:"CUBE",pattern:/CUBE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Else=r.createToken({name:"ELSE",pattern:/ELSE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Excludes=r.createToken({name:"EXCLUDES",pattern:/EXCLUDES/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.False=r.createToken({name:"FALSE",pattern:/FALSE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.First=r.createToken({name:"FIRST",pattern:/FIRST/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.From=r.createToken({name:"FROM",pattern:/FROM/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.GroupBy=r.createToken({name:"GROUP_BY",pattern:/GROUP BY/i,longer_alt:t.Identifier}),t.Having=r.createToken({name:"HAVING",pattern:/HAVING/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.In=r.createToken({name:"IN",pattern:/IN/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.NotIn=r.createToken({name:"NOT_IN",pattern:/NOT IN/i,longer_alt:t.Identifier}),t.Includes=r.createToken({name:"INCLUDES",pattern:/INCLUDES/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Last=r.createToken({name:"LAST",pattern:/LAST/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Like=r.createToken({name:"LIKE",pattern:/LIKE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Limit=r.createToken({name:"LIMIT",pattern:/LIMIT/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Not=r.createToken({name:"NOT",pattern:/NOT/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Null=r.createToken({name:"NULL",pattern:/NULL/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Nulls=r.createToken({name:"NULLS",pattern:/NULLS/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Or=r.createToken({name:"OR",pattern:/OR/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Rollup=r.createToken({name:"ROLLUP",pattern:/ROLLUP/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Select=r.createToken({name:"SELECT",pattern:/SELECT/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.True=r.createToken({name:"TRUE",pattern:/TRUE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Using=r.createToken({name:"USING",pattern:/USING/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Where=r.createToken({name:"WHERE",pattern:/WHERE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.With=r.createToken({name:"WITH",pattern:/WITH/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.For=r.createToken({name:"FOR",pattern:/FOR/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Update=r.createToken({name:"UPDATE",pattern:/UPDATE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.ReservedKeyword]}),t.Above=r.createToken({name:"ABOVE",pattern:/ABOVE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.AboveOrBelow=r.createToken({name:"ABOVE_OR_BELOW",pattern:/ABOVE_OR_BELOW/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.At=r.createToken({name:"AT",pattern:/AT/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Below=r.createToken({name:"BELOW",pattern:/BELOW/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.DataCategory=r.createToken({name:"DATA_CATEGORY",pattern:/DATA CATEGORY/i,longer_alt:t.Identifier,categories:[t.Keyword]}),t.End=r.createToken({name:"END",pattern:/END/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Offset=r.createToken({name:"OFFSET",pattern:/OFFSET/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Reference=r.createToken({name:"REFERENCE",pattern:/REFERENCE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Scope=r.createToken({name:"SCOPE",pattern:/SCOPE/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Tracking=r.createToken({name:"TRACKING",pattern:/TRACKING/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Then=r.createToken({name:"THEN",pattern:/THEN/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Typeof=r.createToken({name:"TYPEOF",pattern:/TYPEOF/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.View=r.createToken({name:"VIEW",pattern:/VIEW/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.Viewstat=r.createToken({name:"VIEWSTAT",pattern:/VIEWSTAT/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.When=r.createToken({name:"WHEN",pattern:/WHEN/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.SecurityEnforced=r.createToken({name:"SECURITY_ENFORCED",pattern:/SECURITY_ENFORCED/i,longer_alt:t.Identifier,categories:[t.Keyword,t.Identifier]}),t.CalendarMonth=r.createToken({name:"CALENDAR_MONTH",pattern:/CALENDAR_MONTH/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.CalendarQuarter=r.createToken({name:"CALENDAR_QUARTER",pattern:/CALENDAR_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.CalendarYear=r.createToken({name:"CALENDAR_YEAR",pattern:/CALENDAR_YEAR/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.DayInMonth=r.createToken({name:"DAY_IN_MONTH",pattern:/DAY_IN_MONTH/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.DayInWeek=r.createToken({name:"DAY_IN_WEEK",pattern:/DAY_IN_WEEK/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.DayInYear=r.createToken({name:"DAY_IN_YEAR",pattern:/DAY_IN_YEAR/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.DayOnly=r.createToken({name:"DAY_ONLY",pattern:/DAY_ONLY/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.FiscalMonth=r.createToken({name:"FISCAL_MONTH",pattern:/FISCAL_MONTH/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.FiscalQuarter=r.createToken({name:"FISCAL_QUARTER",pattern:/FISCAL_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.FiscalYear=r.createToken({name:"FISCAL_YEAR",pattern:/FISCAL_YEAR/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.HourInDay=r.createToken({name:"HOUR_IN_DAY",pattern:/HOUR_IN_DAY/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.WeekInMonth=r.createToken({name:"WEEK_IN_MONTH",pattern:/WEEK_IN_MONTH/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.WeekInYear=r.createToken({name:"WEEK_IN_YEAR",pattern:/WEEK_IN_YEAR/i,longer_alt:t.Identifier,categories:[t.DateFunction,t.Identifier]}),t.Avg=r.createToken({name:"AVG",pattern:/AVG/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.Count=r.createToken({name:"COUNT",pattern:/COUNT/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.CountDistinct=r.createToken({name:"COUNT_DISTINCT",pattern:/COUNT_DISTINCT/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.Min=r.createToken({name:"MIN",pattern:/MIN/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.Max=r.createToken({name:"MAX",pattern:/MAX/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.Sum=r.createToken({name:"SUM",pattern:/SUM/i,longer_alt:t.Identifier,categories:[t.AggregateFunction,t.Identifier]}),t.Distance=r.createToken({name:"DISTANCE",pattern:/DISTANCE/i,longer_alt:t.Identifier,categories:[t.LocationFunction,t.Identifier]}),t.Geolocation=r.createToken({name:"GEOLOCATION",pattern:/GEOLOCATION/i,longer_alt:t.Identifier,categories:[t.LocationFunction,t.Identifier]}),t.Fields=r.createToken({name:"FIELDS",pattern:/FIELDS/i,longer_alt:t.Identifier,categories:[t.FieldsFunction,t.Identifier]}),t.Format=r.createToken({name:"FORMAT",pattern:/FORMAT/i,longer_alt:t.Identifier,categories:[t.OtherFunction,t.Identifier]}),t.Tolabel=r.createToken({name:"toLabel",pattern:/TOLABEL/i,longer_alt:t.Identifier,categories:[t.OtherFunction,t.Identifier]}),t.ConvertTimeZone=r.createToken({name:"convertTimezone",pattern:/CONVERTTIMEZONE/i,longer_alt:t.Identifier,categories:[t.OtherFunction,t.Identifier]}),t.ConvertCurrency=r.createToken({name:"convertCurrency",pattern:/CONVERTCURRENCY/i,longer_alt:t.Identifier,categories:[t.OtherFunction,t.Identifier]}),t.Grouping=r.createToken({name:"GROUPING",pattern:/GROUPING/i,longer_alt:t.Identifier,categories:[t.OtherFunction,t.Identifier]}),t.All=r.createToken({name:"ALL",pattern:/ALL/i,longer_alt:t.Identifier,categories:[t.FieldsFunctionParamIdentifier,t.Identifier]}),t.Custom=r.createToken({name:"CUSTOM",pattern:/CUSTOM/i,longer_alt:t.Identifier,categories:[t.FieldsFunctionParamIdentifier,t.Identifier]}),t.Standard=r.createToken({name:"STANDARD",pattern:/STANDARD/i,longer_alt:t.Identifier,categories:[t.FieldsFunctionParamIdentifier,t.Identifier]}),t.Yesterday=r.createToken({name:"YESTERDAY",pattern:/YESTERDAY/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.Today=r.createToken({name:"TODAY",pattern:/TODAY/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.Tomorrow=r.createToken({name:"TOMORROW",pattern:/TOMORROW/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastWeek=r.createToken({name:"LAST_WEEK",pattern:/LAST_WEEK/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisWeek=r.createToken({name:"THIS_WEEK",pattern:/THIS_WEEK/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextWeek=r.createToken({name:"NEXT_WEEK",pattern:/NEXT_WEEK/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastMonth=r.createToken({name:"LAST_MONTH",pattern:/LAST_MONTH/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisMonth=r.createToken({name:"THIS_MONTH",pattern:/THIS_MONTH/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextMonth=r.createToken({name:"NEXT_MONTH",pattern:/NEXT_MONTH/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.Last90_days=r.createToken({name:"LAST_90_DAYS",pattern:/LAST_90_DAYS/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.Next90_days=r.createToken({name:"NEXT_90_DAYS",pattern:/NEXT_90_DAYS/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisQuarter=r.createToken({name:"THIS_QUARTER",pattern:/THIS_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastQuarter=r.createToken({name:"LAST_QUARTER",pattern:/LAST_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextQuarter=r.createToken({name:"NEXT_QUARTER",pattern:/NEXT_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisYear=r.createToken({name:"THIS_YEAR",pattern:/THIS_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastYear=r.createToken({name:"LAST_YEAR",pattern:/LAST_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextYear=r.createToken({name:"NEXT_YEAR",pattern:/NEXT_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisFiscalQuarter=r.createToken({name:"THIS_FISCAL_QUARTER",pattern:/THIS_FISCAL_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastFiscalQuarter=r.createToken({name:"LAST_FISCAL_QUARTER",pattern:/LAST_FISCAL_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextFiscalQuarter=r.createToken({name:"NEXT_FISCAL_QUARTER",pattern:/NEXT_FISCAL_QUARTER/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.ThisFiscalYear=r.createToken({name:"THIS_FISCAL_YEAR",pattern:/THIS_FISCAL_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.LastFiscalYear=r.createToken({name:"LAST_FISCAL_YEAR",pattern:/LAST_FISCAL_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextFiscalYear=r.createToken({name:"NEXT_FISCAL_YEAR",pattern:/NEXT_FISCAL_YEAR/i,longer_alt:t.Identifier,categories:[t.DateLiteral,t.Identifier,t.DateLiteralNotIdentifier]}),t.NextNDays=r.createToken({name:"NEXT_N_DAYS",pattern:/NEXT_N_DAYS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNDays=r.createToken({name:"LAST_N_DAYS",pattern:/LAST_N_DAYS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NDaysAgo=r.createToken({name:"N_DAYS_AGO",pattern:/N_DAYS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNWeeks=r.createToken({name:"NEXT_N_WEEKS",pattern:/NEXT_N_WEEKS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNWeeks=r.createToken({name:"LAST_N_WEEKS",pattern:/LAST_N_WEEKS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NWeeksAgo=r.createToken({name:"N_WEEKS_AGO",pattern:/N_WEEKS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNMonths=r.createToken({name:"NEXT_N_MONTHS",pattern:/NEXT_N_MONTHS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNMonths=r.createToken({name:"LAST_N_MONTHS",pattern:/LAST_N_MONTHS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NMonthsAgo=r.createToken({name:"N_MONTHS_AGO",pattern:/N_MONTHS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNQuarters=r.createToken({name:"NEXT_N_QUARTERS",pattern:/NEXT_N_QUARTERS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNQuarters=r.createToken({name:"LAST_N_QUARTERS",pattern:/LAST_N_QUARTERS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NQuartersAgo=r.createToken({name:"N_QUARTERS_AGO",pattern:/N_QUARTERS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNYears=r.createToken({name:"NEXT_N_YEARS",pattern:/NEXT_N_YEARS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNYears=r.createToken({name:"LAST_N_YEARS",pattern:/LAST_N_YEARS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NYearsAgo=r.createToken({name:"N_YEARS_AGO",pattern:/N_YEARS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNFiscalQuarters=r.createToken({name:"NEXT_N_FISCAL_QUARTERS",pattern:/NEXT_N_FISCAL_QUARTERS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNFiscalQuarters=r.createToken({name:"LAST_N_FISCAL_QUARTERS",pattern:/LAST_N_FISCAL_QUARTERS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NFiscalQuartersAgo=r.createToken({name:"N_FISCAL_QUARTERS_AGO",pattern:/N_FISCAL_QUARTERS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NextNFiscalYears=r.createToken({name:"NEXT_N_FISCAL_YEARS",pattern:/NEXT_N_FISCAL_YEARS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.LastNFiscalYears=r.createToken({name:"LAST_N_FISCAL_YEARS",pattern:/LAST_N_FISCAL_YEARS/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.NFiscalYearsAgo=r.createToken({name:"N_FISCAL_YEARS_AGO",pattern:/N_FISCAL_YEARS_AGO/i,longer_alt:t.Identifier,categories:[t.DateNLiteral,t.Identifier]}),t.Equal=r.createToken({name:"EQUAL",pattern:"=",categories:[t.RelationalOperator]}),t.NotEqual=r.createToken({name:"NOT_EQUAL",pattern:/!=|<>/,categories:[t.RelationalOperator]}),t.LessThan=r.createToken({name:"LESS_THAN",pattern:"<",categories:[t.RelationalOperator]}),t.LessThanOrEqual=r.createToken({name:"LESS_THAN_OR_EQUAL",pattern:"<=",categories:[t.RelationalOperator]}),t.GreaterThan=r.createToken({name:"GREATER_THAN",pattern:">",categories:[t.RelationalOperator]}),t.GreaterThanOrEqual=r.createToken({name:"GREATER_THAN_OR_EQUAL",pattern:">=",categories:[t.RelationalOperator]}),t.Decimal=r.createToken({name:"DECIMAL",pattern:".",categories:[t.SymbolIdentifier]}),t.Colon=r.createToken({name:"COLON",pattern:":",categories:[t.SymbolIdentifier]}),t.Semicolon=r.createToken({name:"SEMICOLON",pattern:";",categories:[t.SymbolIdentifier]}),t.Comma=r.createToken({name:"COMMA",pattern:",",categories:[t.SymbolIdentifier]}),t.Asterisk=r.createToken({name:"ASTERISK",pattern:"*",categories:[t.SymbolIdentifier]}),t.LParen=r.createToken({name:"L_PAREN",pattern:"(",categories:[t.SymbolIdentifier]}),t.RParen=r.createToken({name:"R_PAREN",pattern:")",categories:[t.SymbolIdentifier]}),t.Plus=r.createToken({name:"PLUS",pattern:"+",categories:[t.SymbolIdentifier]}),t.Minus=r.createToken({name:"MINUS",pattern:"-",categories:[t.SymbolIdentifier]}),t.DateTime=r.createToken({name:"DATETIME",pattern:/[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?(\Z|\.[0-9]+Z|\+[0-9]{2}:[0-9]{2}|\-[0-9]{2}:[0-9]{2}|\+[0-9]{4}|\-[0-9]{4})/i,categories:[t.DateIdentifier]}),t.DateToken=r.createToken({name:"DATE",pattern:/[0-9]{4}-[0-9]{2}-[0-9]{2}/,categories:[t.DateIdentifier]}),t.CurrencyPrefixedDecimal=r.createToken({name:"CURRENCY_PREFIXED_DECIMAL",pattern:/[a-zA-Z]{3}[0-9]+\.\d+/,longer_alt:t.Identifier,categories:[t.DecimalNumberIdentifier]}),t.SignedDecimal=r.createToken({name:"SIGNED_DECIMAL",pattern:/(\-|\+)[0-9]*\.\d+/,categories:[t.NumberIdentifier,t.DecimalNumberIdentifier]}),t.UnsignedDecimal=r.createToken({name:"UNSIGNED_DECIMAL",pattern:/[0-9]*\.\d+/,categories:[t.NumberIdentifier,t.DecimalNumberIdentifier]}),t.CurrencyPrefixedInteger=r.createToken({name:"CURRENCY_PREFIXED_INTEGER",pattern:/[a-zA-Z]{3}[0-9]+/,longer_alt:t.Identifier,categories:[t.DecimalNumberIdentifier,t.Identifier]}),t.SignedInteger=r.createToken({name:"SIGNED_INTEGER",pattern:/(\-|\+)[0-9]+/,categories:[t.NumberIdentifier,t.IntegerNumberIdentifier]}),t.GeolocationUnit=r.createToken({name:"GEOLOCATION_UNIT",pattern:/'(mi|km)'/i,longer_alt:t.Identifier,categories:[t.Identifier]}),t.UnsignedInteger=r.createToken({name:"UNSIGNED_INTEGER",pattern:/0|[1-9]\d*/,categories:[t.NumberIdentifier,t.IntegerNumberIdentifier]}),t.Delegated=r.createToken({name:"Delegated",pattern:/DELEGATED/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["D","d"]}),t.Everything=r.createToken({name:"Everything",pattern:/EVERYTHING/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["E","e"]}),t.MineAndMyGroups=r.createToken({name:"MineAndMyGroups",pattern:/MINEANDMYGROUPS/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["M","m"]}),t.Mine=r.createToken({name:"Mine",pattern:/MINE/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["M","m"]}),t.MyTerritory=r.createToken({name:"MyTerritory",pattern:/MY_TERRITORY/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["M","m"]}),t.MyTeamTerritory=r.createToken({name:"MyTeamTerritory",pattern:/MY_TEAM_TERRITORY/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["M","m"]}),t.Team=r.createToken({name:"Team",pattern:/TEAM/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["T","t"]}),t.AllPrivate=r.createToken({name:"AllPrivate",pattern:/ALLPRIVATE/i,longer_alt:t.Identifier,categories:[t.UsingScopeEnumeration,t.Identifier],start_chars_hint:["A","a"]}),t.allTokens=[t.WhiteSpace,t.And,t.Asc,t.As,t.OrderBy,t.Cube,t.Desc,t.Else,t.Excludes,t.False,t.First,t.From,t.Grouping,t.GroupBy,t.Having,t.Includes,t.Like,t.Limit,t.Nulls,t.Null,t.Rollup,t.Select,t.True,t.Using,t.Where,t.With,t.Update,t.Delegated,t.Everything,t.MineAndMyGroups,t.Mine,t.MyTerritory,t.MyTeamTerritory,t.Team,t.AllPrivate,t.AboveOrBelow,t.Above,t.At,t.Below,t.DataCategory,t.End,t.Offset,t.Reference,t.Scope,t.Tracking,t.Then,t.Typeof,t.Viewstat,t.View,t.When,t.SecurityEnforced,t.CalendarMonth,t.CalendarQuarter,t.CalendarYear,t.DayInMonth,t.DayInWeek,t.DayInYear,t.DayOnly,t.FiscalMonth,t.FiscalQuarter,t.FiscalYear,t.HourInDay,t.WeekInMonth,t.WeekInYear,t.Avg,t.CountDistinct,t.Count,t.Min,t.Max,t.Sum,t.Distance,t.Geolocation,t.Fields,t.Format,t.Tolabel,t.ConvertTimeZone,t.ConvertCurrency,t.Yesterday,t.Today,t.Tomorrow,t.LastWeek,t.ThisWeek,t.NextWeek,t.LastMonth,t.ThisMonth,t.NextMonth,t.Last90_days,t.Next90_days,t.ThisQuarter,t.LastQuarter,t.NextQuarter,t.ThisYear,t.LastYear,t.NextYear,t.ThisFiscalQuarter,t.LastFiscalQuarter,t.NextFiscalQuarter,t.ThisFiscalYear,t.LastFiscalYear,t.NextFiscalYear,t.NextNDays,t.LastNDays,t.NDaysAgo,t.NextNWeeks,t.LastNWeeks,t.NWeeksAgo,t.NextNMonths,t.LastNMonths,t.NMonthsAgo,t.NextNQuarters,t.LastNQuarters,t.NQuartersAgo,t.NextNYears,t.LastNYears,t.NYearsAgo,t.NextNFiscalQuarters,t.LastNFiscalQuarters,t.NFiscalQuartersAgo,t.NextNFiscalYears,t.LastNFiscalYears,t.NFiscalYearsAgo,t.GeolocationUnit,t.All,t.Custom,t.Standard,t.In,t.NotIn,t.For,t.Or,t.Last,t.Not,t.CurrencyPrefixedDecimal,t.CurrencyPrefixedInteger,t.StringIdentifier,t.Identifier,t.DateTime,t.DateToken,t.SignedDecimal,t.UnsignedDecimal,t.UnsignedInteger,t.SignedInteger,t.Equal,t.NotEqual,t.LessThanOrEqual,t.LessThan,t.GreaterThanOrEqual,t.GreaterThan,t.Decimal,t.Colon,t.Semicolon,t.Comma,t.Asterisk,t.LParen,t.RParen,t.Plus,t.Minus];var o=new r.Lexer(t.allTokens,{ensureOptimizations:!0,skipValidations:!0});t.lex=function(e){return o.tokenize(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFlattenedFields=t.getField=t.getComposedField=t.isWhereOrHavingClauseWithRightCondition=t.isWhereClauseWithRightCondition=t.isValueWithDateNLiteralCondition=t.isValueWithDateLiteralCondition=t.isValueQueryCondition=t.isValueFunctionCondition=t.isValueCondition=t.isSubquery=t.isString=t.isOrderByFn=t.isOrderByField=t.isNegationCondition=t.isHavingClauseWithRightCondition=t.isGroupByFn=t.isGroupByField=t.isFieldSubquery=t.hasAlias=void 0;var r=n(7);function i(e){if("string"==typeof e)return{type:"Field",field:e};if(r.isComposeFieldFunction(e)){var t=void 0;return e.parameters&&(t=Array.isArray(e.parameters)?e.parameters:[e.parameters]),{type:"FieldFunctionExpression",functionName:e.functionName||e.fn,parameters:t,alias:e.alias}}if(r.isComposeFieldRelationship(e))return{type:"FieldRelationship",field:e.field,relationships:e.relationships,objectPrefix:e.objectPrefix};if(r.isComposeFieldSubquery(e))return{type:"FieldSubquery",subquery:e.subquery};if(r.isComposeFieldTypeof(e))return{type:"FieldTypeof",field:e.field,conditions:e.conditions};if(r.isComposeField(e))return{type:"Field",field:e.field,objectPrefix:e.objectPrefix};throw new TypeError("The input object provided did not match any valid field types")}Object.defineProperty(t,"hasAlias",{enumerable:!0,get:function(){return r.hasAlias}}),Object.defineProperty(t,"isFieldSubquery",{enumerable:!0,get:function(){return r.isFieldSubquery}}),Object.defineProperty(t,"isGroupByField",{enumerable:!0,get:function(){return r.isGroupByField}}),Object.defineProperty(t,"isGroupByFn",{enumerable:!0,get:function(){return r.isGroupByFn}}),Object.defineProperty(t,"isHavingClauseWithRightCondition",{enumerable:!0,get:function(){return r.isHavingClauseWithRightCondition}}),Object.defineProperty(t,"isNegationCondition",{enumerable:!0,get:function(){return r.isNegationCondition}}),Object.defineProperty(t,"isOrderByField",{enumerable:!0,get:function(){return r.isOrderByField}}),Object.defineProperty(t,"isOrderByFn",{enumerable:!0,get:function(){return r.isOrderByFn}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return r.isString}}),Object.defineProperty(t,"isSubquery",{enumerable:!0,get:function(){return r.isSubquery}}),Object.defineProperty(t,"isValueCondition",{enumerable:!0,get:function(){return r.isValueCondition}}),Object.defineProperty(t,"isValueFunctionCondition",{enumerable:!0,get:function(){return r.isValueFunctionCondition}}),Object.defineProperty(t,"isValueQueryCondition",{enumerable:!0,get:function(){return r.isValueQueryCondition}}),Object.defineProperty(t,"isValueWithDateLiteralCondition",{enumerable:!0,get:function(){return r.isValueWithDateLiteralCondition}}),Object.defineProperty(t,"isValueWithDateNLiteralCondition",{enumerable:!0,get:function(){return r.isValueWithDateNLiteralCondition}}),Object.defineProperty(t,"isWhereClauseWithRightCondition",{enumerable:!0,get:function(){return r.isWhereClauseWithRightCondition}}),Object.defineProperty(t,"isWhereOrHavingClauseWithRightCondition",{enumerable:!0,get:function(){return r.isWhereOrHavingClauseWithRightCondition}}),t.getComposedField=function(e){return i(e)},t.getField=i,t.getFlattenedFields=function(e,t){if(!e)return[];var n=(e=r.isFieldSubquery(e)?e.subquery:e).fields,i={};e.groupBy&&(i=(Array.isArray(e.groupBy)?e.groupBy:[e.groupBy]).reduce((function(e,t){return r.isGroupByField(t)&&(e[t.field.toLocaleLowerCase()]=t.field),e}),{}));var o=-1,a=(r.isSubquery(e)?e.relationshipName:e.sObject||"").toLowerCase(),s=(e.sObjectAlias||"").toLowerCase();return n.flatMap((function(e){switch(e.type){case"Field":return e.field;case"FieldFunctionExpression":var n=r.getParams(e);if(n=n.map((function(e){if(e.includes(".")){var t=e.split("."),n=t[0].toLowerCase();return n!==s&&n!==a||(t=t.slice(1)),t.join(".")}return e})),e.alias&&(e.isAggregateFn||t))return e.alias;if(e.alias){var u=n[0];return u.includes(".")?((n=u.split(".").slice(0,-1)).push(e.alias),n.join(".")):e.alias}return e.isAggregateFn||t?"expr"+ ++o:n.length>0?n.join("."):e.functionName;case"FieldRelationship":var c=e.relationships[0].toLowerCase();return r.hasAlias(e)?e.alias:e.rawValue&&i[e.rawValue.toLocaleLowerCase()]?e.field:c===s||c===a?e.relationships.concat([e.field]).slice(1).join("."):e.relationships.concat([e.field]).join(".");case"FieldSubquery":return e.subquery.relationshipName;case"FieldTypeof":var l=new Set,f=[];return e.conditions.forEach((function(t){t.fieldList.forEach((function(t){l.has(t)||(l.add(t),f.push(e.field+"."+t))}))})),f}})).filter((function(e){return r.isString(e)}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Compose=t.composeQuery=t.formatQuery=void 0;var i=n(7),o=n(50),a=n(17);function s(e,t){if(void 0===t&&(t={}),!e)return"";(t=t||{}).format=!!t.format,t.logging&&(console.time("composer"),console.log("Composing Query:",e),console.log("Format output:",t.format));var n=new u(e,t).query;return t.logging&&console.timeEnd("composer"),n}t.formatQuery=function(e,t){return s(a.parseQuery(e),{format:!0,formatOptions:t})},t.composeQuery=s;var u=function(){function e(e,t){void 0===t&&(t={}),this.soql=e,this.logging=!1,this.format=!1;var n=(t=r({autoCompose:!0},t)).logging,i=t.format;this.logging=n,this.format=i,this.query="",this.formatter=new o.Formatter(this.format,r({logging:this.logging},t.formatOptions)),t.autoCompose&&this.start()}return e.prototype.start=function(){this.query=this.parseQuery(this.soql)},e.prototype.log=function(e){this.logging&&console.log("Current SOQL:",e)},e.prototype.parseFn=function(e){var t,n=this;return e.rawValue?t=e.rawValue:(t=e.functionName,t+="("+(e.parameters||[]).map((function(e){return i.isString(e)?e:n.parseFn(e)})).join(", ")+")"),e.alias&&(t+=" "+e.alias),t},e.prototype.parseQuery=function(e){var t=this,n={fields:this.parseFields(e.fields).map((function(e){return{text:e.text,typeOfClause:e.typeOfClause,isSubquery:e.text.startsWith("("),prefix:"",suffix:""}})),isSubquery:i.isSubquery(e),lineBreaks:[]},r=this.formatter.formatClause("SELECT").trimStart();this.formatter.formatFields(n);var o="";if(n.fields.forEach((function(e){Array.isArray(e.typeOfClause)?o+=""+e.prefix+t.formatter.formatTyeOfField(e.text,e.typeOfClause)+e.suffix:o+=""+e.prefix+e.text+e.suffix})),r+=this.formatter.formatText(o),r+=this.formatter.formatClause("FROM"),i.isSubquery(e)){var a=e.sObjectPrefix||[];a.push(e.relationshipName),r+=this.formatter.formatText(""+a.join(".")+i.get(e.sObjectAlias,""," "))}else r+=this.formatter.formatText(""+e.sObject+i.get(e.sObjectAlias,""," "));return this.log(r),e.usingScope&&(r+=this.formatter.formatClause("USING SCOPE"),r+=this.formatter.formatText(e.usingScope),this.log(r)),e.where&&(r+=this.formatter.formatClause("WHERE"),r+=this.formatter.formatText(this.parseWhereOrHavingClause(e.where)),this.log(r)),e.groupBy&&(r+=this.formatter.formatClause("GROUP BY"),r+=this.formatter.formatText(this.parseGroupByClause(e.groupBy)),this.log(r),e.having&&(r+=this.formatter.formatClause("HAVING"),r+=this.formatter.formatText(this.parseWhereOrHavingClause(e.having)),this.log(r))),e.orderBy&&(!Array.isArray(e.orderBy)||e.orderBy.length>0)&&(r+=this.formatter.formatClause("ORDER BY"),r+=this.formatter.formatText(this.parseOrderBy(e.orderBy)),this.log(r)),i.isNumber(e.limit)&&(r+=this.formatter.formatClause("LIMIT"),r+=this.formatter.formatText(""+e.limit),this.log(r)),i.isNumber(e.offset)&&(r+=this.formatter.formatClause("OFFSET"),r+=this.formatter.formatText(""+e.offset),this.log(r)),e.withDataCategory&&(r+=this.formatter.formatClause("WITH DATA CATEGORY"),r+=this.formatter.formatText(this.parseWithDataCategory(e.withDataCategory)),this.log(r)),e.withSecurityEnforced&&(r+=this.formatter.formatClause("WITH SECURITY_ENFORCED"),this.log(r)),e.for&&(r+=this.formatter.formatClause("FOR"),r+=this.formatter.formatText(e.for),this.log(r)),e.update&&(r+=this.formatter.formatClause("UPDATE"),r+=this.formatter.formatText(e.update),this.log(r)),r},e.prototype.parseFields=function(e){var t=this;return e.map((function(e){var n,r="",o=e.objectPrefix?e.objectPrefix+".":"";switch(e.type){case"Field":r=""+o+e.field+(e.alias?" "+e.alias:"");break;case"FieldFunctionExpression":var a="";e.parameters&&(a=e.parameters.map((function(e){return i.isString(e)?e:t.parseFields([e]).map((function(e){return e.text}))})).join(", ")),r=e.functionName+"("+a+")"+(e.alias?" "+e.alias:"");break;case"FieldRelationship":r=""+o+e.relationships.join(".")+"."+e.field+(i.hasAlias(e)?" "+e.alias:"");break;case"FieldSubquery":r=t.formatter.formatSubquery(t.parseQuery(e.subquery));break;case"FieldTypeof":r=(n=t.parseTypeOfField(e)).join(" ")}return{text:r,typeOfClause:n}}))},e.prototype.parseTypeOfField=function(e){var t=this,n=["TYPEOF "+e.field].concat(e.conditions.map((function(e){return t.formatter.formatTypeofFieldCondition(e)})));return n.push("END"),n},e.prototype.parseWhereOrHavingClause=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var r="",o=e.left,a=!1;if(o&&(r+=this.formatter.formatParens(o.openParen,"(",i.isNegationCondition(o)),!i.isNegationCondition(o))){t=t+(o.openParen||0)-(o.closeParen||0),n&&t++;var s="";s+=i.isValueFunctionCondition(o)?this.parseFn(o.fn):o.field,s+=" "+o.operator+" ",i.isValueQueryCondition(o)?s+=this.formatter.formatSubquery(this.parseQuery(o.valueQuery),1,!0):s+=i.getAsArrayStr(i.getWhereValue(o.value,o.literalType)),r+=this.formatter.formatWithIndent(s),r+=this.formatter.formatParens(o.closeParen,")",n)}if(i.isWhereOrHavingClauseWithRightCondition(e)){var u=i.get(e.operator);a="NOT"===u;var c=this.formatter.formatWhereClauseOperators(u,this.parseWhereOrHavingClause(e.right,t,i.isNegationCondition(o)),t);return(""+(a?r.trimRight():r)+c).trim()}return r.trim()},e.prototype.parseGroupByClause=function(e){var t=this;return(Array.isArray(e)?e:[e]).map((function(e){return i.isGroupByField(e)?e.field:t.parseFn(e.fn)})).join(", ")},e.prototype.parseOrderBy=function(e){var t=this;if(Array.isArray(e))return this.formatter.formatOrderByArray(e.map((function(e){return t.parseOrderBy(e)})));var n="";return i.isOrderByField(e)?n=""+i.get(e.field," "):n+=this.parseFn(e.fn)+" ",(n+=""+i.get(e.order," ")+i.get(e.nulls,"","NULLS ")).trim()},e.prototype.parseWithDataCategory=function(e){return e.conditions.map((function(e){var t=e.parameters.length>1?"("+e.parameters.join(", ")+")":""+e.parameters.join(", ");return e.groupName+" "+e.selector+" "+t})).join(" AND ")},e}();t.Compose=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Formatter=void 0;var i=n(7),o=function(){function e(e,t){this.currIndent=1,this.enabled=e,this.options=r({numIndent:1,fieldMaxLineLength:60,fieldSubqueryParensOnOwnLine:!0,newLineAfterKeywords:!1,logging:!1},t),this.options.newLineAfterKeywords&&(this.options.fieldSubqueryParensOnOwnLine=!0)}return e.prototype.log=function(e){this.options.logging&&console.log(e)},e.prototype.getIndent=function(e){return void 0===e&&(e=0),this.repeatChar((this.currIndent+e)*this.options.numIndent,"\t")},e.prototype.repeatChar=function(e,t){return new Array(e).fill(t).join("")},e.prototype.setSubquery=function(e){this.currIndent=e?this.currIndent+=1:this.currIndent-=1},e.prototype.stepCurrIndex=function(e){this.currIndent+=e},e.prototype.formatFields=function(e){var t=this;function n(t){e.fields[t-1]&&(e.fields[t-1].suffix=e.fields[t-1].suffix.trim())}if(e.fields.forEach((function(t,n){t.suffix=e.fields.length-1===n?"":", "})),this.enabled){var r=0,o=!1;e.fields.forEach((function(a,s){a.isSubquery?(n(s),a.prefix="\n"+t.getIndent(),a.suffix=e.fields.length-1===s?"":", ",r=0,o=!0):Array.isArray(a.typeOfClause)?(n(s),a.prefix="\n"+t.getIndent(),o=!0):i.isNumber(t.options.fieldMaxLineLength)&&((r+=a.text.length+a.suffix.length)>t.options.fieldMaxLineLength||o)&&(n(s),(!t.options.newLineAfterKeywords||s>0)&&(a.prefix+="\n"+t.getIndent()),r=0,o=!1),t.log(a)}))}},e.prototype.formatTyeOfField=function(e,t){var n=this;return this.enabled&&this.options.newLineAfterKeywords?t.map((function(e,r){return 0===r?e:r===t.length-1?""+n.getIndent()+e:n.getIndent()+"\t"+e})).join("\n"):e},e.prototype.formatTypeofFieldCondition=function(e){var t="",n=e.fieldList.join(", ");if(this.enabled&&this.options.newLineAfterKeywords){var r=this.getIndent();t=""+e.type,e.objectType?t+="\n"+r+"\t\t"+e.objectType+"\n"+r+"\tTHEN\n"+r+"\t\t"+n:t+="\n"+r+"\t\t"+n}else t=e.type,e.objectType?t+=" "+e.objectType+" THEN "+n:t+=" "+n;return t},e.prototype.formatSubquery=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=!1),n&&t++;var r="(",i=")";return this.enabled&&(this.options.fieldSubqueryParensOnOwnLine||this.options.newLineAfterKeywords?(e=e.replace(/\n/g,"\n"+this.repeatChar(t,"\t")),r="(\n"+this.repeatChar(t,"\t"),i="\n"+this.repeatChar(t-1,"\t")+")"):e=e.replace(/\n/g,"\n\t")),""+r+e+i},e.prototype.formatClause=function(e){return this.enabled?this.options.newLineAfterKeywords?"\n"+e+"\n\t":"\n"+e:" "+e},e.prototype.formatText=function(e){return this.enabled&&(this.options.newLineAfterKeywords||e.startsWith("\n"))?e:" "+e},e.prototype.formatWithIndent=function(e){return this.enabled?""+this.getIndent()+e:e},e.prototype.formatOrderByArray=function(e){var t=this;if(this.enabled){var n=0,r="";return e.forEach((function(i,o){var a=e[o+1];n+=i.length,a&&(n+a.length>t.options.fieldMaxLineLength||t.options.newLineAfterKeywords)?(r+=i+",\n\t",n=0):r+=i+(a?", ":"")})),r}return e.join(", ")},e.prototype.formatParens=function(e,t,n){void 0===n&&(n=!1);var r="";if(i.isNumber(e)&&e>0)if(this.enabled)if("("===t){for(var o=0;o<e;o++)n&&o===e-1?r+="(":0===o?r+="(\n":(this.currIndent++,r+=this.getIndent()+"(\n");(!n||e>1)&&this.currIndent++}else for(o=e-1;o>=0;o--)n&&o===e-1?r+=")":(this.currIndent--,r+="\n"+this.getIndent()+")");else r+=i.generateParens(e,t);return r},e.prototype.formatWhereClauseOperators=function(e,t,n){void 0===n&&(n=0);var r="NOT"===e;return this.enabled&&!r?"\n"+this.getIndent(n)+e+" "+t:(r?"":" ")+e+" "+t},e.prototype.formatAddNewLine=function(e,t){return void 0===e&&(e=" "),this.enabled&&!t?"\n":e},e}();t.Formatter=o}])}));